h2. for of

h3. "index":index.html > "ES Next":es_next_detail.html > for of

for of構文とは、Generator、あるいはiteratorのnextを呼び出して値を列挙する構文です。

*例*

<notextile>
<pre class="brush: js">
import {iterator} from 'iterators';
var items = function ( obj ) {
      return {
        [iterator] : function () {
          for( var i in obj ) {
            yield [i, obj[i]];
          }
        }
      }
    },
    iter = {
      arr : [],
      add : function ( value ) {
        this.arr.push( value );
      },
      [iterator] : function () {
        var arr = this.arr;
        return {
          index : 0,
          next : function () {
            if ( arr.length > this.index ) {
              var ret = arr[ this.index ];
              this.index++;
              return ret;
            } else {
              throw StopIteration;
            }
          }
        }
      }
    }
    obj = {x:200,y:300}
for of(var i in items(obj)) {
  console.log(i[0], i[1]);
}
iter.add( 100 );
iter.add( 200 );
iter.add( 300 );
iter.add( 400 );
for of(var i in iter) {
  console.log(i);//100,200,300...
}
</pre>
</notextile>

このように、generatorかiteratorの定義されたオブジェクトを与えることで、次々にnextを呼び出し、StopIterationが投げられると、処理を終了します。


