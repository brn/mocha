h2. trait

h3. "index":index.html > "ES Next":es_next_detail.html > class

クラスの振る舞いのみを定義したオブジェクトです。

*実装済み処理系* : 無し

*基本*

<notextile>
<pre class="brush: js">
trait TestTrait {
  requires doTestm1;
  public testm1( ...arg )->arg[0];
}
trait TestTrait2 {
  requires doTestm2;
  public testm2( ...arg )->arg[0];
  public testm3->"ok";
}
class MixinTest {
  public doTestm1() -> "aaa";
  public doTestm2() -> "bbb"
  mixin TestTrait with testm1 as m1;
  mixin TestTrait2 without testm2, without testm3;
}
</pre>
</notextile>

*変換後*

<notextile>
<pre class="brush: js">
  var TestTrait =  {
        _mochaTraitPrivate : {},
        _mochaTraitPublic :  {
          testm1 : function testm1() {
            var arg = Runtime.toArray(arguments,0);
            return arg[0];
          }
        },
        _mochaRequires :  {
          doTestm1 : true
        },
        _mochaTraitMark : true
      },
      TestTrait2 =  {
        _mochaTraitPrivate : {},
        _mochaTraitPublic :  {
          testm2 : function testm2() {
            var arg = Runtime.toArray(arguments,0);
            return arg[0];
          },
          testm3 : function testm3() {
            return "ok";
          }
        },
        _mochaRequires :  {
          doTestm2 : true
        },
        _mochaTraitMark : true
      },
      MixinTest = function () {
        function constructor(){}
        function MixinTest() {
          Runtime.initializeClass(this,MixinTest,_mochaPrivateHolder,constructor,arguments,'MixinTest',101);
        }
        var _mochaPrivateHolder = function (){};
        Runtime.createUnenumProp(constructor,"__harmony_class__",1);
        MixinTest.prototype.doTestm1 = function () {
          return "aaa";
        };
        MixinTest.prototype.doTestm2 = function () {
          return "bbb";
        };
        Runtime.classMixin(MixinTest,_mochaPrivateHolder,TestTrait, {
          testm1 : "m1"
        },{});
        Runtime.classMixin(MixinTest,_mochaPrivateHolder,TestTrait2,{}, {
          testm2 : true,
          testm3 : true
        });
        Runtime.checkRequirements(MixinTest,_mochaPrivateHolder,[TestTrait,TestTrait2],'class_test.js',105);
        Runtime.createUnenumProp(MixinTest.prototype,"constructor",constructor);
        return MixinTest;
   }()
</pre>
</notextile>

h4. Detail

クラスに対して振る舞いを注入します。
traitはrequireプロパティを設定することで実装しなければならないメソッドを指定できます。
またmixin属性を設定することで、trait同士、あるいはclassとtraitを合成可能です。
その際にmixin ... with &lt;method_name&gt; as &lt:new_name&gt;とすることでメソッド名の書き換えが可能です。
またwithout属性を指定することで、特定のメソッドのmixinを無効化することが可能です。
public,privateなどの指定は"class":class_detail.htmlを参照してください。

h5. 宣言

_trait_ *&lt;trait name&gt;*
　
traitを宣言します。
　

_mixin_ *&lt;trait name&gt;* _with_(optional) *&lt;member name&gt;* _as_ *&lt;new member name&gt* _without_(optional) *&lt;member name&gt;*
　
traitをmixinします。もし同名のメンバがあった場合は上書きされます。
with ~ asが指定されていた場合はmember nameをnew member nameでリネームします。
without ~が指定されていた場合はそのメソッドはmixinされません。

