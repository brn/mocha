h2. Destructuring Assignment

h3. "index":index.html > "ES Next":es_next_detail.html > Destructuring Assignment

分割代入機能です。

*実装済み処理系* : mozilla 1.6以降

*基本的な例*

*配列*

<notextile>
<pre class="brush: js">
var array = [0,1,2,3],
    [one,two,three,four] = array;
console.log(one,two,three,four);
</pre>
</notextile>

*変換後*

<notextile>
<pre class="brush: js">
var array = [0,1,2,3],
    one = array[0],
    two = array[1],
    three = array[2],
    four = array[3]
</pre>
</notextile>

*オブジェクト*

<notextile>
<pre class="brush: js">
var obj = {
      one : 0,
      two : 1,
      three : 2,
      four : 3
    },
    {one,two,three,four} = obj;
</pre>
</notextile>

*変換後*

<notextile>
<pre class="brush: js">
var obj = {
      one : 0,
      two : 1,
      three : 2,
      four : 3
    },
    one = obj.one,
    two = obj.two,
    three = obj.three,
    four = obj.four;
</pre>
</notextile>

*引数*

<notextile>
<pre class="brush: js">
var obj = {
      one : 0,
      two : 1,
      three : 2,
      four : 3
    }
function test({one,two,three,four}) {
console.log(one,two,three,four);
}
</pre>
</notextile>

*変換後*

<notextile>
<pre class="brush: js">
var obj = {
      one : 0,
      two : 1,
      three : 2,
      four : 3
    }
function test(_mochaLocalTmp0) {
var one = _mochaLocalTmp0.one,
    two = _mochaLocalTmp0.two,
    three = _mochaLocalTmp0.three,
    four = _mochaLocalTmp0.four;
console.log(one,two,three,four);
}
</pre>
</notextile>

*複雑な例*

<notextile>
<pre class="brush: js">
var object = {
      value1 : 100,
      value2 : {
        value3 : 100
      },
      value4 : [100,200,300],
      value5 : {
        value6 : [{value7 : 100}]
      },
      "@value" : {
        strvalue : 100
      }
    }
var {value1,value2:{ value3 },value4 : [ value5_,value6_,value7_ ],value5 : { value6 : [{value7}] },"@value":{strvalue}} = object;
</pre>
</notextile>

*変換後*

<notextile>
<pre class="brush: js">
var object = {
      value1 : 100,
      value2 : {
        value3 : 100
      },
      value4 : [100,200,300],
      value5 : {
        value6 : [{value7 : 100}]
      },
      "@value" : {
        strvalue : 100
      }
    },
    value1 = object.value1,
    value3 = object.value2 && object.value2.value3?object.value2.value3 : undefined,
    value5_ = object.value4 && object.value4[0]?object.value4[0] : undefined,
    value6_ = object.value4 && object.value4[1]?object.value4[1] : undefined,
    value7_ = object.value4 && object.value4[2]?object.value4[2] : undefined,
    value7 = object.value5 && object.value5.value6 && object.value5.value6[0] && object.value5.value6[0].value7?object.value5.value6[0].value7 : undefined,
    strvalue = object["@value"] && object["@value"].strvalue?object["@value"].strvalue : undefined;
</pre>
</notextile>
