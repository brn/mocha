h2. 概要

mochaはEcmascript262 5th edition 及び、現在策定中のEcmascript harmonyの文法とちょっとした拡張をブラウザで利用可能なjavascriptに変換するコンパイラです。

mochaは大体以下の機能を持っています。

* ES Next -> javascriptへの変換
* 変換後の圧縮
* ファイルのモジュール化
* 条件別コンパイル
* デバッグ用エラーハンドラの挿入

*ES Next -> javascriptへの変換*

もっとも基本的な機能です。
詳細は "ES Next":es_next_detail.html


*変換後の圧縮*

変換済みのjavascriptを圧縮します。
変換から圧縮までをシームレスに行えるので他のツールを起動する必要がありません。


*ファイルのモジュール化*

ES Nextの機能であるimport及び、module構文を使用する事でファイルをモジュール化可能です。
これらはコンパイル時に静的に結合されます。


*条件別コンパイル*

コンパイラ命令としてversion演算子を導入しました。
事前に定義したバージョン識別子の有無でコードブロックの削除が可能です。

*デバッグ用エラーハンドラ*

ファイルを結合した際に、エラーが起きた行数がわからなくなるのを避けるため、行数及び、ファイル名をスコープ、あるいはステートメント毎に挿入します。


h2. インストール

* *windows*  bin/win32/mchd.exeにあるバイナリファイルを使用するか、vc/mocha.slnをビルド
* *osx* bin/macos/mchdにあるバイナリを使用するか、<pre><code>scons</code></pre>を実行してビルド
* *linux* <pre><code>scons</code></pre>を実行してビルド

*依存*

自前でビルドする際には以下の依存ライブラリをインストールしてください。

* python
* scons
* boost (unordered_map.hpp)
* libedit (osx, linux) -> おそらくデフォルトで入ってる。

h2. ガイド

* 設定ファイルを作る
** "config.js":config.js_guide.html
** "監視設定ファイル":watch_guide.html
** "コマンドの設定":command_guide.html
* コンパイル
** "オプション":option_guide.html
** "デプロイ設定":deploy_guide.html
** "コンパイラ拡張":compiler_directive.html
* テスト
** "phantomjsを使う":phantomjs_guide.html

