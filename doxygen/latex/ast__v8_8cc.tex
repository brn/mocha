\hypertarget{ast__v8_8cc}{
\section{Y:/mocha/src/ast/directives/ast\_\-v8.cc File Reference}
\label{ast__v8_8cc}\index{Y:/mocha/src/ast/directives/ast\_\-v8.cc@{Y:/mocha/src/ast/directives/ast\_\-v8.cc}}
}
{\ttfamily \#include $<$third\_\-party/v8/include/v8.h$>$}\par
{\ttfamily \#include $<$ast/directive/ast\_\-v8.h$>$}\par
{\ttfamily \#include $<$ast/visitors/utils/processors/processor\_\-info.h$>$}\par
{\ttfamily \#include $<$utils/pool/managed\_\-handle.h$>$}\par
{\ttfamily \#include $<$ast/ast.h$>$}\par
{\ttfamily \#include $<$assert.h$>$}\par
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classmocha_1_1_j_s_file_root}{mocha::JSFileRoot}
\item 
class \hyperlink{classmocha_1_1_j_s_variable_stmt}{mocha::JSVariableStmt}
\item 
class \hyperlink{classmocha_1_1_j_s_i_f_stmt}{mocha::JSIFStmt}
\item 
class \hyperlink{classmocha_1_1_j_s_iteration_stmt}{mocha::JSIterationStmt}
\item 
class \hyperlink{classmocha_1_1_j_s_swtich_stmt}{mocha::JSSwtichStmt}
\item 
class \hyperlink{classmocha_1_1_j_s_case_clause}{mocha::JSCaseClause}
\item 
class \hyperlink{classmocha_1_1_j_s_thorw_stmt}{mocha::JSThorwStmt}
\item 
class \hyperlink{classmocha_1_1_j_s_function}{mocha::JSFunction}
\item 
class \hyperlink{classmocha_1_1_j_s_call_exp}{mocha::JSCallExp}
\item 
class \hyperlink{classmocha_1_1_j_s_new_exp}{mocha::JSNewExp}
\item 
class \hyperlink{classmocha_1_1_j_s_new_exp}{mocha::JSNewExp}
\item 
class \hyperlink{classmocha_1_1_j_s_postfix_exp}{mocha::JSPostfixExp}
\item 
class \hyperlink{classmocha_1_1_j_s_unary_exp}{mocha::JSUnaryExp}
\item 
class \hyperlink{classmocha_1_1_j_s_binary_exp}{mocha::JSBinaryExp}
\item 
class \hyperlink{classmocha_1_1_j_s_compare_exp}{mocha::JSCompareExp}
\item 
class \hyperlink{classmocha_1_1_j_s_assignment_exp}{mocha::JSAssignmentExp}
\item 
class \hyperlink{classmocha_1_1_j_s_conditional_exp}{mocha::JSConditionalExp}
\item 
class \hyperlink{classmocha_1_1_j_s_value_node}{mocha::JSValueNode}
\item 
class \hyperlink{classmocha_1_1_j_s_env}{mocha::JSEnv}
\item 
class \hyperlink{classmocha_1_1_j_s_ast}{mocha::JSAst}
\end{DoxyCompactItemize}
\subsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \hyperlink{namespacemocha}{mocha}
\end{DoxyCompactItemize}
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{ast__v8_8cc_af727ce3358893d0b7d8a0f8d422dceed}{GET\_\-THIS}(name, args)~V8Object name = args.This()
\item 
\#define \hyperlink{ast__v8_8cc_ac2fe45af3d283cd9b2e34f4c025ace04}{ARGUMENTS\_\-CHECK}(num, arg)
\item 
\#define \hyperlink{ast__v8_8cc_a04ae5fb1f71676c3cd044a84622eae19}{ARGUMENTS\_\-CHECK\_\-GT}(num, arg)
\item 
\#define \hyperlink{ast__v8_8cc_aec212bfb0d15b8b2a8cbdf121536e7c2}{ERROR\_\-CHECK}(obj, type)
\item 
\#define \hyperlink{ast__v8_8cc_a03ee2a4412dd1b01e77e58497c1fd1d5}{ERROR\_\-CHECK\_\-FOR\_\-CREATOR}(obj, type)
\item 
\#define \hyperlink{ast__v8_8cc_acfd5cfa7b8c9b151040693d9dea581ce}{STATEMENT\_\-EXPECT}(name, node)
\item 
\#define \hyperlink{ast__v8_8cc_a9c3f730064ac51e9163987e05ed5c09d}{FORBID\_\-STATEMENT}(name, node)
\item 
\#define \hyperlink{ast__v8_8cc_a6977ed944d1a5f92b80c7cbdcf772665}{FORBID\_\-LIST}(name, node)
\item 
\#define \hyperlink{ast__v8_8cc_a733395bafab6a266c5ba0cdeab3c6e20}{VALUE\_\-EXPECT}(name, node)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef v8::Local$<$ v8::Object $>$ \hyperlink{namespacemocha_ab7457ad2b98f5878f68f21f2c916ffb9}{mocha::V8Object}
\item 
typedef v8::Handle$<$ v8::Value $>$ \hyperlink{namespacemocha_a22eca0d76f439fca2a26cae77eb6ade4}{mocha::V8Value}
\item 
typedef v8::Function \hyperlink{namespacemocha_a6ba45e16246aba54ff2cd64ca991e089}{mocha::V8Function}
\item 
typedef v8::String \hyperlink{namespacemocha_a04d2fb2a4ea8d21353a943ebf4263970}{mocha::V8String}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
v8::Persistent$<$ Object $>$ \hyperlink{namespacemocha_aa3601132fe6d68ee544dfdefd24c4d77}{mocha::GetMark} ()
\item 
v8::Persistent$<$ Object $>$ \hyperlink{namespacemocha_ae698971194d69223459539c3070dcdac}{mocha::GetCreatorMark} ()
\item 
{\footnotesize template$<$typename T $>$ }\\T $\ast$ \hyperlink{namespacemocha_addb5abd40c2d91b7abe2efb219219170}{mocha::GetInternal} (int num, V8Object obj)
\item 
bool \hyperlink{namespacemocha_aeaba8702c2f94037a2e96776dd9838aa}{mocha::TypeCheck} (int type, V8Object obj)
\item 
{\footnotesize template$<$typename T $>$ }\\T \hyperlink{namespacemocha_aadd32983aa0ed1135c168f6e85beb5ac}{mocha::GetInternalHandle} (int num, V8Object obj)
\item 
void \hyperlink{namespacemocha_ad2c0f20efbd87c39a19eec72ee7dc24f}{mocha::SetUniqueProp} (AstNode $\ast$ast, Handle$<$ ObjectTemplate $>$ object)
\end{DoxyCompactItemize}


\subsection{Define Documentation}
\hypertarget{ast__v8_8cc_ac2fe45af3d283cd9b2e34f4c025ace04}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!ARGUMENTS\_\-CHECK@{ARGUMENTS\_\-CHECK}}
\index{ARGUMENTS\_\-CHECK@{ARGUMENTS\_\-CHECK}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{ARGUMENTS\_\-CHECK}]{\setlength{\rightskip}{0pt plus 5cm}\#define ARGUMENTS\_\-CHECK(
\begin{DoxyParamCaption}
\item[{}]{num, }
\item[{}]{arg}
\end{DoxyParamCaption}
)}}
\label{ast__v8_8cc_ac2fe45af3d283cd9b2e34f4c025ace04}
{\bfseries Value:}
\begin{DoxyCode}
if ( arg.Length() != num ) {                                          \
    return v8::ThrowException( V8String::New( "arguments error" ) );   \
  }
\end{DoxyCode}


Definition at line 42 of file ast\_\-v8.cc.

\hypertarget{ast__v8_8cc_a04ae5fb1f71676c3cd044a84622eae19}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!ARGUMENTS\_\-CHECK\_\-GT@{ARGUMENTS\_\-CHECK\_\-GT}}
\index{ARGUMENTS\_\-CHECK\_\-GT@{ARGUMENTS\_\-CHECK\_\-GT}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{ARGUMENTS\_\-CHECK\_\-GT}]{\setlength{\rightskip}{0pt plus 5cm}\#define ARGUMENTS\_\-CHECK\_\-GT(
\begin{DoxyParamCaption}
\item[{}]{num, }
\item[{}]{arg}
\end{DoxyParamCaption}
)}}
\label{ast__v8_8cc_a04ae5fb1f71676c3cd044a84622eae19}
{\bfseries Value:}
\begin{DoxyCode}
if ( arg.Length() >= num ) {                                          \
    return v8::ThrowException( V8String::New( "arguments error" ) );   \
  }
\end{DoxyCode}


Definition at line 47 of file ast\_\-v8.cc.

\hypertarget{ast__v8_8cc_aec212bfb0d15b8b2a8cbdf121536e7c2}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!ERROR\_\-CHECK@{ERROR\_\-CHECK}}
\index{ERROR\_\-CHECK@{ERROR\_\-CHECK}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{ERROR\_\-CHECK}]{\setlength{\rightskip}{0pt plus 5cm}\#define ERROR\_\-CHECK(
\begin{DoxyParamCaption}
\item[{}]{obj, }
\item[{}]{type}
\end{DoxyParamCaption}
)}}
\label{ast__v8_8cc_aec212bfb0d15b8b2a8cbdf121536e7c2}
{\bfseries Value:}
\begin{DoxyCode}
if ( obj->InternalFieldCount() > 0 && obj->GetInternalField( 0 )->StrictEquals( 
      GetMark() ) && !TypeCheck( type , obj ) ) { \
    return v8::ThrowException( "arguments error" );                    \
  }
\end{DoxyCode}


Definition at line 52 of file ast\_\-v8.cc.

\hypertarget{ast__v8_8cc_a03ee2a4412dd1b01e77e58497c1fd1d5}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!ERROR\_\-CHECK\_\-FOR\_\-CREATOR@{ERROR\_\-CHECK\_\-FOR\_\-CREATOR}}
\index{ERROR\_\-CHECK\_\-FOR\_\-CREATOR@{ERROR\_\-CHECK\_\-FOR\_\-CREATOR}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{ERROR\_\-CHECK\_\-FOR\_\-CREATOR}]{\setlength{\rightskip}{0pt plus 5cm}\#define ERROR\_\-CHECK\_\-FOR\_\-CREATOR(
\begin{DoxyParamCaption}
\item[{}]{obj, }
\item[{}]{type}
\end{DoxyParamCaption}
)}}
\label{ast__v8_8cc_a03ee2a4412dd1b01e77e58497c1fd1d5}
{\bfseries Value:}
\begin{DoxyCode}
if ( obj->InternalFieldCount() > 0 && obj->GetInternalField( 0 )->StrictEquals( 
      GetCreatorMark() ) ) { \
    return v8::ThrowException( "Illegal invocation" );                    \
  }
\end{DoxyCode}


Definition at line 57 of file ast\_\-v8.cc.

\hypertarget{ast__v8_8cc_a6977ed944d1a5f92b80c7cbdcf772665}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!FORBID\_\-LIST@{FORBID\_\-LIST}}
\index{FORBID\_\-LIST@{FORBID\_\-LIST}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{FORBID\_\-LIST}]{\setlength{\rightskip}{0pt plus 5cm}\#define FORBID\_\-LIST(
\begin{DoxyParamCaption}
\item[{}]{name, }
\item[{}]{node}
\end{DoxyParamCaption}
)}}
\label{ast__v8_8cc_a6977ed944d1a5f92b80c7cbdcf772665}
{\bfseries Value:}
\begin{DoxyCode}
if ( node->NodeType() == AstNode::kNodeList || node->NodeType() == AstNode::State
      mentList ){ \
    std::string tmp = "Unexpected NodeList or StatementList got in the arguments 
      of "; \
    tmp += #name;                                                       \
    return v8::ThrowException( V8String::New( tmp.c_str() ) );          \
  }
\end{DoxyCode}


Definition at line 782 of file ast\_\-v8.cc.

\hypertarget{ast__v8_8cc_a9c3f730064ac51e9163987e05ed5c09d}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!FORBID\_\-STATEMENT@{FORBID\_\-STATEMENT}}
\index{FORBID\_\-STATEMENT@{FORBID\_\-STATEMENT}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{FORBID\_\-STATEMENT}]{\setlength{\rightskip}{0pt plus 5cm}\#define FORBID\_\-STATEMENT(
\begin{DoxyParamCaption}
\item[{}]{name, }
\item[{}]{node}
\end{DoxyParamCaption}
)}}
\label{ast__v8_8cc_a9c3f730064ac51e9163987e05ed5c09d}
{\bfseries Value:}
\begin{DoxyCode}
if ( node->CastToStatement() && !node->IsEmpty() ){                   \
    std::string tmp = "Unexpected Statement got in the arguments of ";  \
    tmp += #name;                                                       \
    return v8::ThrowException( V8String::New( tmp.c_str() ) );          \
  }
\end{DoxyCode}


Definition at line 775 of file ast\_\-v8.cc.

\hypertarget{ast__v8_8cc_af727ce3358893d0b7d8a0f8d422dceed}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!GET\_\-THIS@{GET\_\-THIS}}
\index{GET\_\-THIS@{GET\_\-THIS}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{GET\_\-THIS}]{\setlength{\rightskip}{0pt plus 5cm}\#define GET\_\-THIS(
\begin{DoxyParamCaption}
\item[{}]{name, }
\item[{}]{args}
\end{DoxyParamCaption}
)~V8Object name = args.This()}}
\label{ast__v8_8cc_af727ce3358893d0b7d8a0f8d422dceed}


Definition at line 41 of file ast\_\-v8.cc.

\hypertarget{ast__v8_8cc_acfd5cfa7b8c9b151040693d9dea581ce}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!STATEMENT\_\-EXPECT@{STATEMENT\_\-EXPECT}}
\index{STATEMENT\_\-EXPECT@{STATEMENT\_\-EXPECT}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{STATEMENT\_\-EXPECT}]{\setlength{\rightskip}{0pt plus 5cm}\#define STATEMENT\_\-EXPECT(
\begin{DoxyParamCaption}
\item[{}]{name, }
\item[{}]{node}
\end{DoxyParamCaption}
)}}
\label{ast__v8_8cc_acfd5cfa7b8c9b151040693d9dea581ce}
{\bfseries Value:}
\begin{DoxyCode}
if ( !node->CastToStatement() && !node->IsEmpty() ){          \
    std::string tmp = "The arguments of ";                      \
    tmp += #name;                                               \
    tmp += " expect Statement";                                 \
    return v8::ThrowException( V8String::New( tmp.c_str() ) );  \
  }
\end{DoxyCode}


Definition at line 767 of file ast\_\-v8.cc.

\hypertarget{ast__v8_8cc_a733395bafab6a266c5ba0cdeab3c6e20}{
\index{ast\_\-v8.cc@{ast\_\-v8.cc}!VALUE\_\-EXPECT@{VALUE\_\-EXPECT}}
\index{VALUE\_\-EXPECT@{VALUE\_\-EXPECT}!ast_v8.cc@{ast\_\-v8.cc}}
\subsubsection[{VALUE\_\-EXPECT}]{\setlength{\rightskip}{0pt plus 5cm}\#define VALUE\_\-EXPECT(
\begin{DoxyParamCaption}
\item[{}]{name, }
\item[{}]{node}
\end{DoxyParamCaption}
)}}
\label{ast__v8_8cc_a733395bafab6a266c5ba0cdeab3c6e20}
{\bfseries Value:}
\begin{DoxyCode}
if ( node->NodeType() != AstNode::kValueNode && !node->IsEmpty() ){   \
    std::string tmp = "The arguments of ";                              \
    tmp += #name;                                                       \
    tmp += " expect ValueNode";                                         \
    return v8::ThrowException( V8String::New( tmp.c_str() ) );          \
  }
\end{DoxyCode}


Definition at line 789 of file ast\_\-v8.cc.

