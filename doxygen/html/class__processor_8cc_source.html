<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mocha: Y:/mocha/src/ast/visitors/utils/processors/class_processor.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mocha</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">Y:/mocha/src/ast/visitors/utils/processors/class_processor.cc</div>  </div>
</div>
<div class="contents">
<a href="class__processor_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &lt;<a class="code" href="class__processor_8h.html">ast/visitors/utils/processors/class_processor.h</a>&gt;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;<a class="code" href="processor__info_8h.html">ast/visitors/utils/processors/processor_info.h</a>&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;<a class="code" href="dsta__processor_8h.html">ast/visitors/utils/processors/dsta_processor.h</a>&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;<a class="code" href="trait__processor_8h.html">ast/visitors/utils/processors/trait_processor.h</a>&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;<a class="code" href="visitor__info_8h.html">ast/visitors/utils/visitor_info.h</a>&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;<a class="code" href="ast_8h.html">ast/ast.h</a>&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;<a class="code" href="ast__utils_8h.html">ast/utils/ast_utils.h</a>&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;<a class="code" href="managed__handle_8h.html">utils/pool/managed_handle.h</a>&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;<a class="code" href="grammar_8tab_8hh.html">grammar/grammar.tab.hh</a>&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;<a class="code" href="js__token_8h.html">compiler/tokens/js_token.h</a>&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;<a class="code" href="token__info_8h.html">compiler/tokens/token_info.h</a>&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;<a class="code" href="symbol__list_8h.html">compiler/tokens/symbol_list.h</a>&gt;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="class__processor_8cc.html#a5c3a83864bf5991d09aa5c2abb911bf0">00015</a> <span class="preprocessor">#define TOKEN yy::ParserImplementation::token</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="keyword">namespace </span>mocha {
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="classmocha_1_1_class_processor_utils.html">00020</a> <span class="keyword">class </span><a class="code" href="classmocha_1_1_class_processor_utils.html">ClassProcessorUtils</a> {
<a name="l00021"></a>00021  <span class="keyword">public</span> :
<a name="l00022"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ab68b22b8df753884d141c79423128759">00022</a>   <a class="code" href="classmocha_1_1_class_processor_utils.html#ab68b22b8df753884d141c79423128759">ClassProcessorUtils</a>( <a class="code" href="classmocha_1_1_class_processor.html">ClassProcessor</a>* processor , std::string* private_field ) :
<a name="l00023"></a>00023       <a class="code" href="classmocha_1_1_class_processor_utils.html#ae8daab7ebd208801b9b7c640c8e3b3a0">processor_</a>( processor ) , <a class="code" href="classmocha_1_1_class_processor_utils.html#a48ca9aca95f8511c95934051751eadb9">private_field_</a>( private_field ){}
<a name="l00024"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a27c762615ca89f0543d08d286f6d8981">00024</a>   <a class="code" href="classmocha_1_1_class_processor_utils.html#a27c762615ca89f0543d08d286f6d8981">~ClassProcessorUtils</a>(){}
<a name="l00025"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a610865dafa045c1406bebd542b5c5d83">00025</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a610865dafa045c1406bebd542b5c5d83">CreateHiddenMember</a>( <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* args , <span class="keywordtype">long</span> line ) {
<a name="l00026"></a>00026     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* hidden = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a84a73ee2e0e6743267b1e363751dbcfc">SymbolList::kCreateUnenumProp</a> ),
<a name="l00027"></a>00027                                                   <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00028"></a>00028     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* mod = <a class="code" href="classmocha_1_1_ast_utils.html#ad4547f1789aba2e0857a51a02312b7ca">AstUtils::CreateRuntimeMod</a>( hidden );
<a name="l00029"></a>00029     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* nrm = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( mod , args );
<a name="l00030"></a>00030     <span class="keywordflow">return</span> nrm;
<a name="l00031"></a>00031   }
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#af75b7f05a1ec3c13d31b98b977bf82ec">00034</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#af75b7f05a1ec3c13d31b98b977bf82ec">CreatePrivateHolderName</a>( <span class="keywordtype">long</span> line ) {
<a name="l00035"></a>00035     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00036"></a>00036                                      <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00037"></a>00037   }
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a330e44d58fbec85a47df4a7721679471">00039</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a330e44d58fbec85a47df4a7721679471">CreatePrivateField</a>( <span class="keywordtype">long</span> line ) {
<a name="l00040"></a>00040     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_class_processor_utils.html#a48ca9aca95f8511c95934051751eadb9">private_field_</a>-&gt;c_str(),
<a name="l00041"></a>00041                                      <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00042"></a>00042   }
<a name="l00043"></a>00043 
<a name="l00044"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ab57d62ddfbaeb403018b214da4d09067">00044</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#ab57d62ddfbaeb403018b214da4d09067">CreateThisNode</a>( <span class="keywordtype">long</span> line ) {
<a name="l00045"></a>00045     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* this_node = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66afa8079718990a13ac11b91be6ca45077">SymbolList::kThis</a> ),
<a name="l00046"></a>00046                                                      <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00047"></a>00047     <span class="keywordflow">return</span> this_node;
<a name="l00048"></a>00048   }
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#aa60e32378408cad91c137cac3f69bcbc">00051</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#aa60e32378408cad91c137cac3f69bcbc">CreatePrivateFieldAccessor</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name ) {
<a name="l00052"></a>00052     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* private_field = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a11e0fa30dab1d2d5eb41bc39a440de6a">SymbolList::kGetPrivateRecord</a> ),
<a name="l00053"></a>00053                                                          <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , name-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00054"></a>00054     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* this_sym = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66afa8079718990a13ac11b91be6ca45077">SymbolList::kThis</a> ),
<a name="l00055"></a>00055                                                     <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , name-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00056"></a>00056     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* args = <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 1 , this_sym );
<a name="l00057"></a>00057     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* normal = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( private_field , args );
<a name="l00058"></a>00058     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#ad4547f1789aba2e0857a51a02312b7ca">AstUtils::CreateRuntimeMod</a>( normal );
<a name="l00059"></a>00059   }
<a name="l00060"></a>00060 
<a name="l00061"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a14bb29392495622b718afc8542e77d7f">00061</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a14bb29392495622b718afc8542e77d7f">CreateTypeIdNode</a>( <span class="keywordtype">long</span> line ) {
<a name="l00062"></a>00062     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* this_node = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4ac3c14a1be3245782c98ff2b1fd34608e">SymbolList::kTypeId</a> ),
<a name="l00063"></a>00063                                                      <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00064"></a>00064     <span class="keywordflow">return</span> this_node;
<a name="l00065"></a>00065   }
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ac7e7158b65ce6bc045868d46763c3634">00067</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#ac7e7158b65ce6bc045868d46763c3634">CreateRecord</a>( <span class="keywordtype">long</span> line ) {
<a name="l00068"></a>00068     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* this_sym = <a class="code" href="classmocha_1_1_class_processor_utils.html#ab57d62ddfbaeb403018b214da4d09067">CreateThisNode</a>( line );
<a name="l00069"></a>00069     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* create_record = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a3ae3ddc849b673be29413c71ee2bfb24">SymbolList::kCreatePrivateRecord</a> ),
<a name="l00070"></a>00070                                                          <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00071"></a>00071     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* private_holder = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00072"></a>00072                                                           <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00073"></a>00073     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* args = <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 2 , this_sym , private_holder );
<a name="l00074"></a>00074     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* normal = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( create_record , args );
<a name="l00075"></a>00075     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_call = <a class="code" href="classmocha_1_1_ast_utils.html#ad4547f1789aba2e0857a51a02312b7ca">AstUtils::CreateRuntimeMod</a>( normal );
<a name="l00076"></a>00076     <span class="keywordflow">return</span> runtime_call;
<a name="l00077"></a>00077   }
<a name="l00078"></a>00078 
<a name="l00079"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ab56c8f661100300b99a4ef01cca8ba11">00079</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#ab56c8f661100300b99a4ef01cca8ba11">SetMark</a>( <a class="code" href="classmocha_1_1_function.html">Function</a>* fn ) {
<a name="l00080"></a>00080     std::stringstream str_st;
<a name="l00081"></a>00081     str_st &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4ad76fac2ce0f0b319e73dd2cecc17760c">SymbolList::kClassMark</a> ) &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;
<a name="l00082"></a>00082     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* mark = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( str_st.str().c_str() , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa74ae1f8e3b0701db2bd560658647d586">Token::JS_STRING_LITERAL</a>,
<a name="l00083"></a>00083                                                 fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00084"></a>00084     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* constructor = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66ad5d08f4ad6f83aaf4a1aa9fbc4dd1a71">SymbolList::kConstructor</a> ),
<a name="l00085"></a>00085                                                        <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00086"></a>00086     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* one = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <span class="stringliteral">&quot;1&quot;</span> , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aaa34d928a3c27d343f0319b5a107e831b">Token::JS_NUMERIC_LITERAL</a> , fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>(),
<a name="l00087"></a>00087                                                <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba5452da740cc307738989031c4aca14f9">ValueNode::kNumeric</a> );
<a name="l00088"></a>00088     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* args = <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 3 , constructor , mark , one );
<a name="l00089"></a>00089     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* exp = <a class="code" href="classmocha_1_1_class_processor_utils.html#a610865dafa045c1406bebd542b5c5d83">CreateHiddenMember</a>( args , fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00090"></a>00090     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( exp );
<a name="l00091"></a>00091   }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093   
<a name="l00094"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a9327665bf5bd23c50bf7925e4b497769">00094</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a9327665bf5bd23c50bf7925e4b497769">CreateHiddenConstructor</a> ( <span class="keyword">const</span> <span class="keywordtype">char</span>* name , <span class="keywordtype">long</span> line ) {
<a name="l00095"></a>00095     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name_sym = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( name , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00096"></a>00096     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* <a class="code" href="namespacemocha.html#adf5b9fa11b01461bf5f1aca4f93c29bd">prototype</a> = <a class="code" href="classmocha_1_1_ast_utils.html#ab3f901178db466ed2bd2a0a5287ab797">AstUtils::CreatePrototypeNode</a>( name_sym );
<a name="l00097"></a>00097     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* constructor_sym = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66ad5d08f4ad6f83aaf4a1aa9fbc4dd1a71">SymbolList::kConstructor</a> ),
<a name="l00098"></a>00098                                                            <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00099"></a>00099     std::string constructor_string_expression = <span class="stringliteral">&quot;\&quot;&quot;</span>;
<a name="l00100"></a>00100     constructor_string_expression += <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66ad5d08f4ad6f83aaf4a1aa9fbc4dd1a71">SymbolList::kConstructor</a> );
<a name="l00101"></a>00101     constructor_string_expression += <span class="stringliteral">&quot;\&quot;&quot;</span>;
<a name="l00102"></a>00102     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* constructor_string = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( constructor_string_expression.c_str(),
<a name="l00103"></a>00103                                                               <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00104"></a>00104     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* args = <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 3 , prototype , constructor_string , constructor_sym );
<a name="l00105"></a>00105     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* hidden_constructor = <a class="code" href="classmocha_1_1_class_processor_utils.html#a610865dafa045c1406bebd542b5c5d83">CreateHiddenMember</a>( args , line );
<a name="l00106"></a>00106     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( hidden_constructor );
<a name="l00107"></a>00107   }
<a name="l00108"></a>00108 
<a name="l00109"></a>00109   
<a name="l00110"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#aa3d30f0d1db866791c961ba4193b4810">00110</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#aa3d30f0d1db866791c961ba4193b4810">CreateConstructorInitializer</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* name , <span class="keywordtype">long</span> line ) {
<a name="l00111"></a>00111     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* constructor_sym = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66ad5d08f4ad6f83aaf4a1aa9fbc4dd1a71">SymbolList::kConstructor</a> ),
<a name="l00112"></a>00112                                                            <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00113"></a>00113     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* apply_sym = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66a57b3f00b9d27a37f6249a66778496700">SymbolList::kApply</a> ),
<a name="l00114"></a>00114                                                      <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00115"></a>00115     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a> *args = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00116"></a>00116     args-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( <a class="code" href="classmocha_1_1_class_processor_utils.html#ab57d62ddfbaeb403018b214da4d09067">CreateThisNode</a>( line ) );
<a name="l00117"></a>00117     args-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66afb478163f43c8ecaa08e2790d623860e">SymbolList::kArguments</a> ),
<a name="l00118"></a>00118                                               <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> ) );
<a name="l00119"></a>00119     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* apply_call = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( apply_sym , args );
<a name="l00120"></a>00120     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* initial_call = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( constructor_sym , apply_call );
<a name="l00121"></a>00121     <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* exp_stmt = <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( initial_call );
<a name="l00122"></a>00122     <span class="keywordflow">return</span> exp_stmt;
<a name="l00123"></a>00123   }
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a29af6b8e270cc7ff00c9ed19ec06daaa">00125</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a29af6b8e270cc7ff00c9ed19ec06daaa">CreateMixin</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* mixins , <a class="code" href="classmocha_1_1_processor_info.html">ProcessorInfo</a>* info ) {
<a name="l00126"></a>00126     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* ret = <a class="code" href="classmocha_1_1_trait_processor.html#ae2a0fac54c740889182958f3f62a7e30">TraitProcessor::ProcessMixin</a>( mixins , info , mixins-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00127"></a>00127     <span class="keywordflow">return</span> ret;
<a name="l00128"></a>00128   }
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a5a63e6c4b0567dfa908eeed3ac896ede">00130</a>   <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor_utils.html#a5a63e6c4b0567dfa908eeed3ac896ede">CreateMixinStmt</a>(  <span class="keyword">const</span> <span class="keywordtype">char</span>* name , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* mixin_list , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* body ) {
<a name="l00131"></a>00131     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* mixin = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4ade575c9bc7917ca096a0f3189568da8e">SymbolList::kClassMixin</a> ),
<a name="l00132"></a>00132                                                  <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , body-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad1a001a8c53bf5f73d4e81096f0f41be">LastChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00133"></a>00133     <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = mixin_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00134"></a>00134     <span class="keywordflow">while</span> ( iterator.HasNext() ) {
<a name="l00135"></a>00135       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = iterator.Next();
<a name="l00136"></a>00136       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* rename = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>();
<a name="l00137"></a>00137       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <span class="keyword">remove</span> = rename-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad568cfbbb250d9f799b3f12643e7a351">NextSibling</a>();
<a name="l00138"></a>00138       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node = <span class="keyword">remove</span>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad568cfbbb250d9f799b3f12643e7a351">NextSibling</a>();
<a name="l00139"></a>00139       <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name_sym = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( name , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , body-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad1a001a8c53bf5f73d4e81096f0f41be">LastChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00140"></a>00140       <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* private_holder = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00141"></a>00141                                                             <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , body-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad1a001a8c53bf5f73d4e81096f0f41be">LastChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00142"></a>00142     
<a name="l00143"></a>00143       <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* args = <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 5 , name_sym, private_holder , name_node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#af2a895699bac2012f8b7739bff49c5ec">Clone</a>() , rename-&gt;<a class="code" href="classmocha_1_1_ast_node.html#af2a895699bac2012f8b7739bff49c5ec">Clone</a>() , <span class="keyword">remove</span>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#af2a895699bac2012f8b7739bff49c5ec">Clone</a>() );
<a name="l00144"></a>00144       <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#ad4547f1789aba2e0857a51a02312b7ca">AstUtils::CreateRuntimeMod</a>( mixin );
<a name="l00145"></a>00145       <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_call = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( runtime_accessor , args );
<a name="l00146"></a>00146       <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( runtime_call );
<a name="l00147"></a>00147       body-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00148"></a>00148     }
<a name="l00149"></a>00149   }
<a name="l00150"></a>00150 
<a name="l00151"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a66a15724e9fc5b217b958550c6911016">00151</a>   <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor_utils.html#a66a15724e9fc5b217b958550c6911016">CreateRequirementsCheck</a>(  <span class="keyword">const</span> <span class="keywordtype">char</span>* name , <span class="keyword">const</span> <span class="keywordtype">char</span>* filename , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* mixin_list , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* body ) {
<a name="l00152"></a>00152     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* check_requirements = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4ad79ee7ccef83535947f1c8d46f3211b3">SymbolList::kCheckRequirements</a> ),
<a name="l00153"></a>00153                                                  <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , mixin_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00154"></a>00154     <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = mixin_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00155"></a>00155     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* array = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba95cda68e2b88f59d7c6d539246d5ea77">ValueNode::kArray</a> ) );
<a name="l00156"></a>00156     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* array_inner = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00157"></a>00157     <span class="keywordtype">long</span> line = 0;
<a name="l00158"></a>00158     <span class="keywordflow">while</span> ( iterator.HasNext() ) {
<a name="l00159"></a>00159       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = iterator.Next();
<a name="l00160"></a>00160       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* rename = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>();
<a name="l00161"></a>00161       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <span class="keyword">remove</span> = rename-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad568cfbbb250d9f799b3f12643e7a351">NextSibling</a>();
<a name="l00162"></a>00162       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node = <span class="keyword">remove</span>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad568cfbbb250d9f799b3f12643e7a351">NextSibling</a>();
<a name="l00163"></a>00163       line = name_node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>();
<a name="l00164"></a>00164       array_inner-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( name_node );
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166     array-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( array_inner );
<a name="l00167"></a>00167     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name_sym = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( name , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , mixin_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00168"></a>00168     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* filename_node = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( filename , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa74ae1f8e3b0701db2bd560658647d586">Token::JS_STRING_LITERAL</a> , mixin_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba0393f547a3f38d96be62dad44f848111">ValueNode::kString</a> );
<a name="l00169"></a>00169     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* private_field = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00170"></a>00170                                                          <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , mixin_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00171"></a>00171     <span class="keywordtype">char</span> tmp[ 50 ];
<a name="l00172"></a>00172     sprintf( tmp , <span class="stringliteral">&quot;%d&quot;</span> , line );
<a name="l00173"></a>00173     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* line_num = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( tmp , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aaa34d928a3c27d343f0319b5a107e831b">Token::JS_NUMERIC_LITERAL</a> , mixin_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba5452da740cc307738989031c4aca14f9">ValueNode::kNumeric</a> );
<a name="l00174"></a>00174     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* args = <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 5 , name_sym , private_field , array , filename_node , line_num );
<a name="l00175"></a>00175     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#ad4547f1789aba2e0857a51a02312b7ca">AstUtils::CreateRuntimeMod</a>( check_requirements );
<a name="l00176"></a>00176     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_call = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( runtime_accessor , args );
<a name="l00177"></a>00177     <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( runtime_call );
<a name="l00178"></a>00178     body-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00179"></a>00179   }
<a name="l00180"></a>00180   
<a name="l00181"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a66448399c2ac6f95d54efd5b2740ab3a">00181</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a66448399c2ac6f95d54efd5b2740ab3a">CreateHolderAssignment</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val,
<a name="l00182"></a>00182                                           <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name,
<a name="l00183"></a>00183                                           <a class="code" href="classmocha_1_1_class.html">Class</a>* class_,
<a name="l00184"></a>00184                                           <span class="keywordtype">bool</span> is_const,
<a name="l00185"></a>00185                                           <span class="keywordtype">bool</span> is_instance ) {
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <span class="keywordflow">if</span> ( !is_instance ) {
<a name="l00188"></a>00188       <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* prototype_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#ab3f901178db466ed2bd2a0a5287ab797">AstUtils::CreatePrototypeNode</a>( <a class="code" href="classmocha_1_1_class_processor_utils.html#af75b7f05a1ec3c13d31b98b977bf82ec">CreatePrivateHolderName</a>( val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() ) );
<a name="l00189"></a>00189       <span class="keywordflow">if</span> ( is_const ) {
<a name="l00190"></a>00190         <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#adebbc56fb60852df97fc8c14ca15bc63">AstUtils::CreateConstantProp</a>( prototype_accessor , name , val );
<a name="l00191"></a>00191       } <span class="keywordflow">else</span> {
<a name="l00192"></a>00192         <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* lhs =  <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( prototype_accessor , name );
<a name="l00193"></a>00193         <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , lhs , val );
<a name="l00194"></a>00194       }
<a name="l00195"></a>00195     } <span class="keywordflow">else</span> {
<a name="l00196"></a>00196       <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* field_accessor = <a class="code" href="classmocha_1_1_class_processor_utils.html#aa60e32378408cad91c137cac3f69bcbc">CreatePrivateFieldAccessor</a>( name );
<a name="l00197"></a>00197       <span class="keywordflow">if</span> ( is_const ) {
<a name="l00198"></a>00198         <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#adebbc56fb60852df97fc8c14ca15bc63">AstUtils::CreateConstantProp</a>( field_accessor , name , val );
<a name="l00199"></a>00199       } <span class="keywordflow">else</span> {
<a name="l00200"></a>00200         <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* lhs = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( field_accessor , name );
<a name="l00201"></a>00201         <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , lhs , val );
<a name="l00202"></a>00202       }
<a name="l00203"></a>00203     }
<a name="l00204"></a>00204   }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 
<a name="l00207"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ae749932a020a7f02b636caadc41ed885">00207</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor_utils.html#ae749932a020a7f02b636caadc41ed885">Finish</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* name , <a class="code" href="classmocha_1_1_class.html">Class</a>* class_ , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* closure_ , <a class="code" href="classmocha_1_1_processor_info.html">ProcessorInfo</a>* info ) {
<a name="l00208"></a>00208     <span class="keywordflow">if</span> ( class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a930b6f930cbe0efddfde28ec73c200bc">NodeType</a>() == <a class="code" href="classmocha_1_1_ast_node.html#a7e049e71bcf600466f1c977205d8215ba23d48b7cee86dcf42a9b69c5b4a339ef">AstNode::kExpressionStmt</a> ||
<a name="l00209"></a>00209          class_-&gt;<a class="code" href="classmocha_1_1_class.html#aa0211babf6c2749339b01df68007e25e">Inner</a>() ) {
<a name="l00210"></a>00210       <a class="code" href="classmocha_1_1_token_info.html">TokenInfo</a>* info = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_token_info.html">TokenInfo</a>( name , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() ) );
<a name="l00211"></a>00211       <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* vars = <a class="code" href="classmocha_1_1_ast_utils.html#a9fcb6a0bd018a4d1a98c600287f5db18">AstUtils::CreateVarInitiliser</a>( info , closure_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>() );
<a name="l00212"></a>00212       <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* list = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00213"></a>00213       list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( vars );
<a name="l00214"></a>00214       <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#aa7d849cc4fe5b84c9aa80c81904931fb">AstUtils::CreateVarStmt</a>( list );
<a name="l00215"></a>00215       stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00216"></a>00216       <span class="keywordflow">if</span> ( !class_-&gt;<a class="code" href="classmocha_1_1_class.html#aa0211babf6c2749339b01df68007e25e">Inner</a>() ) {
<a name="l00217"></a>00217         class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#aa40396040f75fb59e320d81c3fd328c8">ReplaceChild</a>( class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>() , stmt );
<a name="l00218"></a>00218       } <span class="keywordflow">else</span> {
<a name="l00219"></a>00219         class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00220"></a>00220       }
<a name="l00221"></a>00221     } <span class="keywordflow">else</span> {
<a name="l00222"></a>00222       <span class="keywordflow">if</span> ( class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a930b6f930cbe0efddfde28ec73c200bc">NodeType</a>() == <a class="code" href="classmocha_1_1_ast_node.html#a7e049e71bcf600466f1c977205d8215baac82cb5bcab2c3ecbbb5624b304f90f6">AstNode::kExportStmt</a> ) {
<a name="l00223"></a>00223         <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name_node = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( name , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00224"></a>00224         <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* local_export = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4ad1b97a8987e1719064e9dabf48b91794">SymbolList::kLocalExport</a> ),
<a name="l00225"></a>00225                                                             <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00226"></a>00226         <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* dot_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( local_export , name_node );
<a name="l00227"></a>00227         <a class="code" href="classmocha_1_1_assignment_exp.html">AssignmentExp</a>* assign = <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , dot_accessor , closure_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>() );
<a name="l00228"></a>00228         <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* var_node = <a class="code" href="classmocha_1_1_ast_utils.html#a9fcb6a0bd018a4d1a98c600287f5db18">AstUtils::CreateVarInitiliser</a>( name_node-&gt;<a class="code" href="classmocha_1_1_value_node.html#a960b13fc3b0e5544518b64a393f4c272">Clone</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>()-&gt;<a class="code" href="classmocha_1_1_value_node.html#a769c0c221283cca863964f6cf673c170">Symbol</a>() , assign );
<a name="l00229"></a>00229         <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* var_stmt = <a class="code" href="classmocha_1_1_ast_utils.html#aa7d849cc4fe5b84c9aa80c81904931fb">AstUtils::CreateVarStmt</a>( var_node );
<a name="l00230"></a>00230         var_stmt-&gt;Line( class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00231"></a>00231         class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#aa40396040f75fb59e320d81c3fd328c8">ReplaceChild</a>( class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>() , var_stmt );
<a name="l00232"></a>00232       } <span class="keywordflow">else</span> {
<a name="l00233"></a>00233         closure_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00234"></a>00234         class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( closure_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>() );
<a name="l00235"></a>00235       }
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237   }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 
<a name="l00240"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a1b999dea09f4b52d22ba43c71febd23e">00240</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a1b999dea09f4b52d22ba43c71febd23e">CreatePrivateHolder</a>( <a class="code" href="classmocha_1_1_class.html">Class</a>* class_ , <a class="code" href="classmocha_1_1_processor_info.html">ProcessorInfo</a>* info ) {
<a name="l00241"></a>00241     <a class="code" href="classmocha_1_1_function.html">Function</a>* fn = <a class="code" href="classmocha_1_1_ast_utils.html#a2b150de7953f29e5c94c7e9d110a6d97">AstUtils::CreateFunctionDecl</a>( ManagedHandle::Retain&lt;Empty&gt;(),
<a name="l00242"></a>00242                                                  ManagedHandle::Retain&lt;Empty&gt;(), ManagedHandle::Retain&lt;Empty&gt;() );
<a name="l00243"></a>00243     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* private_holder_name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00244"></a>00244                                                                <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , class_-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00245"></a>00245     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value = <a class="code" href="classmocha_1_1_ast_utils.html#a9fcb6a0bd018a4d1a98c600287f5db18">AstUtils::CreateVarInitiliser</a>( private_holder_name-&gt;<a class="code" href="classmocha_1_1_value_node.html#a769c0c221283cca863964f6cf673c170">Symbol</a>() , fn );
<a name="l00246"></a>00246     <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#aa7d849cc4fe5b84c9aa80c81904931fb">AstUtils::CreateVarStmt</a>( value );
<a name="l00247"></a>00247     <span class="keywordflow">return</span> stmt;
<a name="l00248"></a>00248   }
<a name="l00249"></a>00249 
<a name="l00250"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">00250</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">GetSafeValue</a>( <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value ) {
<a name="l00251"></a>00251     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* lhs = value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>();
<a name="l00252"></a>00252     <span class="keywordflow">return</span> ( lhs )? lhs : <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66acd88abdc7a362830fc98bcdcf74de223">SymbolList::kUndefined</a> ),
<a name="l00253"></a>00253                                                     <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00254"></a>00254   }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 
<a name="l00258"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a2ff3e378a45327df8060e236970407b8">00258</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a2ff3e378a45327df8060e236970407b8">InstancePrivate</a>( <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value ) {
<a name="l00259"></a>00259     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* private_accessor = <a class="code" href="classmocha_1_1_class_processor_utils.html#aa60e32378408cad91c137cac3f69bcbc">CreatePrivateFieldAccessor</a>( value );
<a name="l00260"></a>00260     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* dot_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( private_accessor , value );
<a name="l00261"></a>00261     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , dot_accessor , <a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">GetSafeValue</a>( value ) ) );
<a name="l00262"></a>00262   }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 
<a name="l00266"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a425461673b00f5f837a893277b4d14cf">00266</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a425461673b00f5f837a893277b4d14cf">InstancePublic</a>( <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value ) {
<a name="l00267"></a>00267     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* this_node = <a class="code" href="classmocha_1_1_class_processor_utils.html#ab57d62ddfbaeb403018b214da4d09067">CreateThisNode</a>( value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00268"></a>00268     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* dot_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( this_node , value );
<a name="l00269"></a>00269     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , dot_accessor , <a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">GetSafeValue</a>( value ) ) );
<a name="l00270"></a>00270   }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 
<a name="l00274"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#abe05538ee0cc20be8f3740d05db761ae">00274</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#abe05538ee0cc20be8f3740d05db761ae">ConstantInstancePrivate</a>( <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value ) {
<a name="l00275"></a>00275     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* constant_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#adebbc56fb60852df97fc8c14ca15bc63">AstUtils::CreateConstantProp</a>( <a class="code" href="classmocha_1_1_class_processor_utils.html#aa60e32378408cad91c137cac3f69bcbc">CreatePrivateFieldAccessor</a>( value ),
<a name="l00276"></a>00276                                                                value , <a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">GetSafeValue</a>( value ) );
<a name="l00277"></a>00277     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( constant_accessor );
<a name="l00278"></a>00278   }
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ad239680f421167da1c307681f6b81197">00282</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#ad239680f421167da1c307681f6b81197">ConstantInstancePublic</a>( <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value ) {
<a name="l00283"></a>00283     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* this_node = <a class="code" href="classmocha_1_1_class_processor_utils.html#ab57d62ddfbaeb403018b214da4d09067">CreateThisNode</a>( value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00284"></a>00284     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* dot_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( this_node , value );
<a name="l00285"></a>00285     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* constant_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#adebbc56fb60852df97fc8c14ca15bc63">AstUtils::CreateConstantProp</a>( dot_accessor,
<a name="l00286"></a>00286                                                                value , <a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">GetSafeValue</a>( value ) );
<a name="l00287"></a>00287     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( constant_accessor );
<a name="l00288"></a>00288   }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
<a name="l00292"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a4b47f30d7968755e17db302f8fe7bf9c">00292</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a4b47f30d7968755e17db302f8fe7bf9c">PrototypePrivate</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val ) {
<a name="l00293"></a>00293     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00294"></a>00294                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00295"></a>00295     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* prototype_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#ab3f901178db466ed2bd2a0a5287ab797">AstUtils::CreatePrototypeNode</a>( name );
<a name="l00296"></a>00296     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* name_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( prototype_accessor , name_node );
<a name="l00297"></a>00297     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , name_accessor , val ) );
<a name="l00298"></a>00298   }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ac931857f4f62031b1ba249cf233da5c1">00302</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#ac931857f4f62031b1ba249cf233da5c1">PrototypePublic</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* class_name, <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val ) {
<a name="l00303"></a>00303     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( class_name,
<a name="l00304"></a>00304                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00305"></a>00305     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* prototype_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#ab3f901178db466ed2bd2a0a5287ab797">AstUtils::CreatePrototypeNode</a>( name );
<a name="l00306"></a>00306     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* name_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( prototype_accessor , name_node );
<a name="l00307"></a>00307     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , name_accessor , val ) );
<a name="l00308"></a>00308   }
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 
<a name="l00312"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#af5b9c37de2825626bf80a70c43d41c00">00312</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#af5b9c37de2825626bf80a70c43d41c00">ConstantPrototypePrivate</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val ) {
<a name="l00313"></a>00313     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00314"></a>00314                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00315"></a>00315     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* prototype_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#ab3f901178db466ed2bd2a0a5287ab797">AstUtils::CreatePrototypeNode</a>( name );
<a name="l00316"></a>00316     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* constant_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#adebbc56fb60852df97fc8c14ca15bc63">AstUtils::CreateConstantProp</a>( prototype_accessor,
<a name="l00317"></a>00317                                                                name_node , val );
<a name="l00318"></a>00318     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( constant_accessor );
<a name="l00319"></a>00319   }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 
<a name="l00323"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a50068b6d373030e45c8c57a0eee045c4">00323</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a50068b6d373030e45c8c57a0eee045c4">ConstantPrototypePublic</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* class_name , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val ) {
<a name="l00324"></a>00324     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( class_name,
<a name="l00325"></a>00325                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00326"></a>00326     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* prototype_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#ab3f901178db466ed2bd2a0a5287ab797">AstUtils::CreatePrototypeNode</a>( name );
<a name="l00327"></a>00327     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* constant_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#adebbc56fb60852df97fc8c14ca15bc63">AstUtils::CreateConstantProp</a>( prototype_accessor,
<a name="l00328"></a>00328                                                                name_node , val );
<a name="l00329"></a>00329     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( constant_accessor );
<a name="l00330"></a>00330   }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 
<a name="l00333"></a>00333 
<a name="l00334"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a28a8c9dae3d507054c521d4b8f5e1830">00334</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a28a8c9dae3d507054c521d4b8f5e1830">PublicStatic</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* class_name , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val ) {
<a name="l00335"></a>00335     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( class_name,
<a name="l00336"></a>00336                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00337"></a>00337     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* dot_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( name , name_node );
<a name="l00338"></a>00338     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , dot_accessor , val ) );
<a name="l00339"></a>00339   }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 
<a name="l00343"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a3d84ff9ef3f2d4082396169e1b99f6bb">00343</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#a3d84ff9ef3f2d4082396169e1b99f6bb">PublicConstantStatic</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* class_name , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val ) {
<a name="l00344"></a>00344     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( class_name,
<a name="l00345"></a>00345                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00346"></a>00346     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* constant_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#adebbc56fb60852df97fc8c14ca15bc63">AstUtils::CreateConstantProp</a>( name , name_node , val );
<a name="l00347"></a>00347     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( constant_accessor );
<a name="l00348"></a>00348   }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 
<a name="l00351"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ac59461d97ab0bb6da1f1ad0024e85e1f">00351</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#ac59461d97ab0bb6da1f1ad0024e85e1f">PrivateStatic</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val ) {
<a name="l00352"></a>00352     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00353"></a>00353                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00354"></a>00354     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* dot_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#aed7efcb40804b8b9e3740a49519fa41a">AstUtils::CreateDotAccessor</a>( name , name_node );
<a name="l00355"></a>00355     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( <a class="code" href="classmocha_1_1_ast_utils.html#a3cd4b28daba962ddd963eec4bffc9f84">AstUtils::CreateAssignment</a>( <span class="charliteral">&#39;=&#39;</span> , dot_accessor , val ) );
<a name="l00356"></a>00356   }
<a name="l00357"></a>00357 
<a name="l00358"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ab81285773872b9fb9cdd7ceb33ad6f2a">00358</a>   <span class="keyword">inline</span> <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#ab81285773872b9fb9cdd7ceb33ad6f2a">PrivateConstantStatic</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* val ) {
<a name="l00359"></a>00359     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a2f26a8c3a2007cc0026411dd67fe7927">SymbolList::kPrivateHolder</a> ),
<a name="l00360"></a>00360                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , val-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00361"></a>00361     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* constant_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#adebbc56fb60852df97fc8c14ca15bc63">AstUtils::CreateConstantProp</a>( name , name_node , val );
<a name="l00362"></a>00362     <span class="keywordflow">return</span> <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( constant_accessor );
<a name="l00363"></a>00363   }
<a name="l00364"></a>00364 
<a name="l00365"></a>00365 
<a name="l00366"></a>00366 
<a name="l00367"></a><a class="code" href="class__processor_8cc.html#a1c1b54e19c8b8737fc3d116208969cae">00367</a> <span class="preprocessor">#define INSTANCE_DSTA(accessor)                                 \</span>
<a name="l00368"></a>00368 <span class="preprocessor">  inline void Instance##accessor##Dsta( const char* class_name, \</span>
<a name="l00369"></a>00369 <span class="preprocessor">                                        Function* closure_body, \</span>
<a name="l00370"></a>00370 <span class="preprocessor">                                        ValueNode* val,         \</span>
<a name="l00371"></a>00371 <span class="preprocessor">                                        bool is_const ) {       \</span>
<a name="l00372"></a>00372 <span class="preprocessor">    if ( is_const ) {                                           \</span>
<a name="l00373"></a>00373 <span class="preprocessor">      ExpressionStmt* stmt = ConstantInstance##accessor( val ); \</span>
<a name="l00374"></a>00374 <span class="preprocessor">          stmt-&gt;Line( val-&gt;Line() );                            \</span>
<a name="l00375"></a>00375 <span class="preprocessor">          closure_body-&gt;AddChild( stmt );                       \</span>
<a name="l00376"></a>00376 <span class="preprocessor">    } else {                                                    \</span>
<a name="l00377"></a>00377 <span class="preprocessor">      ExpressionStmt* stmt = Instance##accessor( val );         \</span>
<a name="l00378"></a>00378 <span class="preprocessor">          stmt-&gt;Line( val-&gt;Line() );                            \</span>
<a name="l00379"></a>00379 <span class="preprocessor">          closure_body-&gt;AddChild( stmt );                       \</span>
<a name="l00380"></a>00380 <span class="preprocessor">    }                                                           \</span>
<a name="l00381"></a>00381 <span class="preprocessor">  }</span>
<a name="l00382"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#afeb3b1bdc113c10b8417e1e9d217042a">00382</a> <span class="preprocessor"></span>  <a class="code" href="class__processor_8cc.html#a1c1b54e19c8b8737fc3d116208969cae">INSTANCE_DSTA</a>(Public);
<a name="l00383"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a2b746fe441de3ed55f5ec11f6f5172d8">00383</a>   <a class="code" href="class__processor_8cc.html#a1c1b54e19c8b8737fc3d116208969cae">INSTANCE_DSTA</a>(Private);
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 <span class="preprocessor">#undef INSTANCE_DSTA</span>
<a name="l00387"></a>00387 <span class="preprocessor"></span>
<a name="l00388"></a><a class="code" href="class__processor_8cc.html#ad016bcbaac43e98086e147b2273be67e">00388</a> <span class="preprocessor">#define PROTOTYPE_DSTA(accessor,args)                                   \</span>
<a name="l00389"></a>00389 <span class="preprocessor">  inline void Prototype##accessor##Dsta( const char* class_name,        \</span>
<a name="l00390"></a>00390 <span class="preprocessor">                                         Function* closure_body,        \</span>
<a name="l00391"></a>00391 <span class="preprocessor">                                         ValueNode* val,                \</span>
<a name="l00392"></a>00392 <span class="preprocessor">                                         bool is_const ) {              \</span>
<a name="l00393"></a>00393 <span class="preprocessor">    if ( is_const ) {                                                   \</span>
<a name="l00394"></a>00394 <span class="preprocessor">      ExpressionStmt* stmt = ConstantPrototype##accessor( args );       \</span>
<a name="l00395"></a>00395 <span class="preprocessor">          stmt-&gt;Line( val-&gt;Line() );                                    \</span>
<a name="l00396"></a>00396 <span class="preprocessor">          closure_body-&gt;AddChild( stmt );                               \</span>
<a name="l00397"></a>00397 <span class="preprocessor">    } else {                                                            \</span>
<a name="l00398"></a>00398 <span class="preprocessor">      ExpressionStmt* stmt = Prototype##accessor( args );               \</span>
<a name="l00399"></a>00399 <span class="preprocessor">          stmt-&gt;Line( val-&gt;Line() );                                    \</span>
<a name="l00400"></a>00400 <span class="preprocessor">          closure_body-&gt;AddChild( stmt );                               \</span>
<a name="l00401"></a>00401 <span class="preprocessor">    }                                                                   \</span>
<a name="l00402"></a>00402 <span class="preprocessor">  }</span>
<a name="l00403"></a>00403 <span class="preprocessor"></span><span class="preprocessor">#define PUBLIC_ARGS class_name , val , val-&gt;FirstChild()</span>
<a name="l00404"></a>00404 <span class="preprocessor"></span><span class="preprocessor">#define PRIVATE_ARGS val , val-&gt;FirstChild()</span>
<a name="l00405"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ad30031d6087cd77d4d2cc6763c05352f">00405</a> <span class="preprocessor"></span>  <a class="code" href="class__processor_8cc.html#ad016bcbaac43e98086e147b2273be67e">PROTOTYPE_DSTA</a>(Public,<a class="code" href="class__processor_8cc.html#abebe29a1ac22f2bc95d6bbf9ece1f563">PUBLIC_ARGS</a>);
<a name="l00406"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ac3bfe46eb0acef03d504b0c6724fb7b4">00406</a>   <a class="code" href="class__processor_8cc.html#ad016bcbaac43e98086e147b2273be67e">PROTOTYPE_DSTA</a>(Private,<a class="code" href="class__processor_8cc.html#acf6436490108b8fb16a34b960412d8ff">PRIVATE_ARGS</a>);
<a name="l00407"></a>00407 <span class="preprocessor">#undef PROTOTYPE_DSTA</span>
<a name="l00408"></a>00408 <span class="preprocessor"></span><span class="preprocessor">#undef PUBLIC_ARGS</span>
<a name="l00409"></a>00409 <span class="preprocessor"></span><span class="preprocessor">#undef PRIVATE_ARGS</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span>
<a name="l00411"></a>00411 
<a name="l00412"></a><a class="code" href="class__processor_8cc.html#ae78d4fd4a6dae19445d17403628f3382">00412</a> <span class="preprocessor">#define STATIC(accessor,args)                                   \</span>
<a name="l00413"></a>00413 <span class="preprocessor">  inline void accessor##StaticDsta( const char* class_name,     \</span>
<a name="l00414"></a>00414 <span class="preprocessor">                                    Function* closure_body,     \</span>
<a name="l00415"></a>00415 <span class="preprocessor">                                    ValueNode* exp,             \</span>
<a name="l00416"></a>00416 <span class="preprocessor">                                    bool is_const ) {           \</span>
<a name="l00417"></a>00417 <span class="preprocessor">    if ( is_const ) {                                           \</span>
<a name="l00418"></a>00418 <span class="preprocessor">      ExpressionStmt* stmt = accessor##ConstantStatic( args );  \</span>
<a name="l00419"></a>00419 <span class="preprocessor">      stmt-&gt;Line( exp-&gt;Line() );                                \</span>
<a name="l00420"></a>00420 <span class="preprocessor">      closure_body-&gt;AddChild( stmt );                           \</span>
<a name="l00421"></a>00421 <span class="preprocessor">    } else {                                                    \</span>
<a name="l00422"></a>00422 <span class="preprocessor">      ExpressionStmt* stmt = accessor##Static( args );          \</span>
<a name="l00423"></a>00423 <span class="preprocessor">      stmt-&gt;Line( exp-&gt;Line() );                                \</span>
<a name="l00424"></a>00424 <span class="preprocessor">      closure_body-&gt;AddChild( stmt );                           \</span>
<a name="l00425"></a>00425 <span class="preprocessor">    }                                                           \</span>
<a name="l00426"></a>00426 <span class="preprocessor">  }</span>
<a name="l00427"></a>00427 <span class="preprocessor"></span>  
<a name="l00428"></a><a class="code" href="class__processor_8cc.html#abebe29a1ac22f2bc95d6bbf9ece1f563">00428</a> <span class="preprocessor">#define PUBLIC_ARGS class_name , exp , exp-&gt;FirstChild()</span>
<a name="l00429"></a><a class="code" href="class__processor_8cc.html#acf6436490108b8fb16a34b960412d8ff">00429</a> <span class="preprocessor"></span><span class="preprocessor">#define PRIVATE_ARGS exp , exp-&gt;FirstChild()</span>
<a name="l00430"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ac5b625457ddf992f3b22b9e3a1bdee30">00430</a> <span class="preprocessor"></span>  <a class="code" href="class__processor_8cc.html#ae78d4fd4a6dae19445d17403628f3382">STATIC</a>( Private , <a class="code" href="class__processor_8cc.html#acf6436490108b8fb16a34b960412d8ff">PRIVATE_ARGS</a> );
<a name="l00431"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#a86c2ceefe5e02737d5a0a9e8afcc7db1">00431</a>   <a class="code" href="class__processor_8cc.html#ae78d4fd4a6dae19445d17403628f3382">STATIC</a>( Public , <a class="code" href="class__processor_8cc.html#abebe29a1ac22f2bc95d6bbf9ece1f563">PUBLIC_ARGS</a> );
<a name="l00432"></a>00432 <span class="preprocessor">#undef PUBLIC_ARGS</span>
<a name="l00433"></a>00433 <span class="preprocessor"></span><span class="preprocessor">#undef PRIVATE_ARGS</span>
<a name="l00434"></a>00434 <span class="preprocessor"></span><span class="preprocessor">#undef STATIC</span>
<a name="l00435"></a>00435 <span class="preprocessor"></span>  
<a name="l00436"></a>00436  <span class="keyword">private</span> :
<a name="l00437"></a>00437   std::string *<a class="code" href="classmocha_1_1_class_processor_utils.html#a48ca9aca95f8511c95934051751eadb9">private_field_</a>;
<a name="l00438"></a><a class="code" href="classmocha_1_1_class_processor_utils.html#ae8daab7ebd208801b9b7c640c8e3b3a0">00438</a>   <a class="code" href="classmocha_1_1_class_processor.html">ClassProcessor</a>* <a class="code" href="classmocha_1_1_class_processor_utils.html#ae8daab7ebd208801b9b7c640c8e3b3a0">processor_</a>;
<a name="l00439"></a>00439 };
<a name="l00440"></a>00440 
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 
<a name="l00444"></a><a class="code" href="namespacemocha.html#a79233380c6ba0832a54e749c1858899e">00444</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="namespacemocha.html#a79233380c6ba0832a54e749c1858899e">table_</a>[] = {
<a name="l00445"></a>00445   <span class="stringliteral">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$0123456789&quot;</span>
<a name="l00446"></a>00446 };
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 
<a name="l00449"></a><a class="code" href="namespacemocha.html#a79060cf4d30b639a13e9fa47788a57e4">00449</a> <span class="keywordtype">void</span> <a class="code" href="namespacemocha.html#a79060cf4d30b639a13e9fa47788a57e4">SetRandomField</a>( std::string *buf ) {
<a name="l00450"></a>00450   <span class="keywordtype">int</span> len = strlen( <a class="code" href="namespacemocha.html#a79233380c6ba0832a54e749c1858899e">table_</a> );
<a name="l00451"></a>00451   *buf += <span class="stringliteral">&quot;__&quot;</span>;
<a name="l00452"></a>00452   <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; 10; i++ ) {
<a name="l00453"></a>00453     fprintf( stderr,  <span class="stringliteral">&quot;rand %d\n&quot;</span> , rand() % len );
<a name="l00454"></a>00454     (*buf) += ( <a class="code" href="namespacemocha.html#a79233380c6ba0832a54e749c1858899e">table_</a>[ rand() % len ] );
<a name="l00455"></a>00455   }
<a name="l00456"></a>00456   *buf += <span class="stringliteral">&quot;__&quot;</span>;
<a name="l00457"></a>00457 }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459 
<a name="l00460"></a><a class="code" href="classmocha_1_1_class_processor.html#a08d136f952bf8924f0937c36a8af840f">00460</a> <a class="code" href="classmocha_1_1_class_processor.html#a08d136f952bf8924f0937c36a8af840f">ClassProcessor::ClassProcessor</a>( <a class="code" href="classmocha_1_1_processor_info.html">ProcessorInfo</a>* info , <a class="code" href="classmocha_1_1_class.html">Class</a>* ast_node , <a class="code" href="classmocha_1_1_statement.html">Statement</a>* tmp_stmt ) :
<a name="l00461"></a>00461     <a class="code" href="classmocha_1_1_managed.html">Managed</a>(),
<a name="l00462"></a>00462     class_id_( info-&gt;GetInfo()-&gt;GetTmpIndex() ) , info_( info ) , class_( ast_node ) , tmp_stmt_( tmp_stmt ) {
<a name="l00463"></a>00463   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a> = <a class="code" href="classmocha_1_1_ast_utils.html#a2b150de7953f29e5c94c7e9d110a6d97">AstUtils::CreateFunctionDecl</a>( ManagedHandle::Retain&lt;Empty&gt;() ,
<a name="l00464"></a>00464                                            ManagedHandle::Retain&lt;Empty&gt;() , ManagedHandle::Retain&lt;StatementList&gt;() );
<a name="l00465"></a>00465   <a class="code" href="classmocha_1_1_class_processor.html#aeb64e1570c436c65ed98c3c1274799d6">closure_</a> = <a class="code" href="classmocha_1_1_ast_utils.html#ae8ac7a22a62b0cf12490efdd1c054045">AstUtils::CreateAnonymousFnCall</a>( <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a> , ManagedHandle::Retain&lt;Empty&gt;() );
<a name="l00466"></a>00466   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00467"></a>00467   <a class="code" href="namespacemocha.html#a79060cf4d30b639a13e9fa47788a57e4">SetRandomField</a>( &amp;<a class="code" href="classmocha_1_1_class_processor.html#abb72577e164ec690e69e29d555aab92d">random_field_</a> );
<a name="l00468"></a>00468   <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a> = <span class="keyword">new</span> <a class="code" href="classmocha_1_1_class_processor_utils.html">ClassProcessorUtils</a>( <span class="keyword">this</span> , &amp;<a class="code" href="classmocha_1_1_class_processor.html#abb72577e164ec690e69e29d555aab92d">random_field_</a> );
<a name="l00469"></a>00469 }
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 
<a name="l00472"></a><a class="code" href="classmocha_1_1_class_processor.html#a4bc98b761704a420e52fab5ff485acb6">00472</a> <a class="code" href="classmocha_1_1_class_processor.html#a4bc98b761704a420e52fab5ff485acb6">ClassProcessor::~ClassProcessor</a>() {
<a name="l00473"></a>00473   <span class="keyword">delete</span> <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>;
<a name="l00474"></a>00474 }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="classmocha_1_1_class_processor.html#aa860cc22cd327b79d9c8aedb19c7667a">00477</a> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#aa860cc22cd327b79d9c8aedb19c7667a">ClassProcessor::ProcessNode</a>() {
<a name="l00478"></a>00478   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node = <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_class.html#a31eda936b0126c8d587e614ced93e6c6">Name</a>();
<a name="l00479"></a>00479   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* body = <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_class.html#afaf4f84b9a2e0a787e02b8fdda9e0b71">Body</a>();
<a name="l00480"></a>00480   <span class="keywordflow">if</span> ( !name_node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a31dd8fcdbeb4b1a6aae660a64a1aac99">IsEmpty</a>() ) {
<a name="l00481"></a>00481     <a class="code" href="classmocha_1_1_token_info.html">TokenInfo</a> *info = name_node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>()-&gt;<a class="code" href="classmocha_1_1_value_node.html#a769c0c221283cca863964f6cf673c170">Symbol</a>();
<a name="l00482"></a>00482     <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a> = info-&gt;<a class="code" href="classmocha_1_1_token_info.html#acdba6b43e70add98383ba963934cf32a">GetToken</a>();
<a name="l00483"></a>00483   } <span class="keywordflow">else</span> {
<a name="l00484"></a>00484     <span class="keywordtype">char</span> buf[500];
<a name="l00485"></a>00485     <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a> = <a class="code" href="classmocha_1_1_ast_utils.html#a75c091058d5c25382b877015958a8400">AstUtils::CreateTmpRef</a>( buf , <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#a0b8fab810d5059ef5d6f09c3e6ef4a78">GetTmpIndex</a>() );
<a name="l00486"></a>00486   }
<a name="l00487"></a>00487   
<a name="l00488"></a>00488   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str() , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00489"></a>00489   <a class="code" href="classmocha_1_1_function.html">Function</a>* fn = <a class="code" href="classmocha_1_1_ast_utils.html#a2b150de7953f29e5c94c7e9d110a6d97">AstUtils::CreateFunctionDecl</a>( name , ManagedHandle::Retain&lt;Empty&gt;() , ManagedHandle::Retain&lt;Empty&gt;() );
<a name="l00490"></a>00490   fn-&gt;Line( <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00491"></a>00491   <a class="code" href="classmocha_1_1_class_processor.html#ab5674a30639efa457b81aabe2cc7778d">common_constructor_</a> = fn;
<a name="l00492"></a>00492   <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( fn );
<a name="l00493"></a>00493   stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00494"></a>00494   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad30c1ecd04dcdc1e122563ad5aed27e6" title="{AstNode*} Insert child to the front of child nodes.">InsertBefore</a>( <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a1b999dea09f4b52d22ba43c71febd23e">CreatePrivateHolder</a>( <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a> , <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a> ) );
<a name="l00495"></a>00495   <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a> *create_record = <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ac7e7158b65ce6bc045868d46763c3634">CreateRecord</a>( <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() ) );
<a name="l00496"></a>00496   fn-&gt;AddChild( create_record );
<a name="l00497"></a>00497   fn-&gt;AddChild( <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#aa3d30f0d1db866791c961ba4193b4810">CreateConstructorInitializer</a>( <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str() , <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() ) );
<a name="l00498"></a>00498   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00499"></a>00499   <a class="code" href="classmocha_1_1_class_processor.html#a35790bb6819b2dd44084d00cea6014e5">ProcessExtends_</a>( <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_class.html#a6042b9b30d7990c238689c71dfb32022">Expandar</a>() );
<a name="l00500"></a>00500   <a class="code" href="classmocha_1_1_class_processor.html#a7dbd185d12ed689e75c48d9443dd8ef3">ProcessBody_</a>( body );
<a name="l00501"></a>00501   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a9327665bf5bd23c50bf7925e4b497769">CreateHiddenConstructor</a>( <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str() , <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() ) );
<a name="l00502"></a>00502   <a class="code" href="classmocha_1_1_return_stmt.html">ReturnStmt</a>* ret = <a class="code" href="classmocha_1_1_ast_utils.html#acde244c3e7c6107360bc0340fa73e8ea">AstUtils::CreateReturnStmt</a>( name-&gt;<a class="code" href="classmocha_1_1_value_node.html#a960b13fc3b0e5544518b64a393f4c272">Clone</a>() );
<a name="l00503"></a>00503   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( ret );
<a name="l00504"></a>00504   <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ae749932a020a7f02b636caadc41ed885">Finish</a>( <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str() , <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a> , <a class="code" href="classmocha_1_1_class_processor.html#aeb64e1570c436c65ed98c3c1274799d6">closure_</a> , <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a> );
<a name="l00505"></a>00505 }
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 
<a name="l00508"></a><a class="code" href="classmocha_1_1_class_processor.html#a35790bb6819b2dd44084d00cea6014e5">00508</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a35790bb6819b2dd44084d00cea6014e5">ClassProcessor::ProcessExtends_</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* node ) {
<a name="l00509"></a>00509   <span class="keywordflow">if</span> ( !node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a31dd8fcdbeb4b1a6aae660a64a1aac99">IsEmpty</a>() ) {
<a name="l00510"></a>00510     <a class="code" href="classmocha_1_1_class_expandar.html">ClassExpandar</a>* expandar = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classmocha_1_1_class_expandar.html">ClassExpandar</a>*<span class="keyword">&gt;</span>( node );
<a name="l00511"></a>00511     <span class="keyword">const</span> <span class="keywordtype">char</span>* extend_fn = ( expandar-&gt;<a class="code" href="classmocha_1_1_class_expandar.html#a3ecc25d967144064854cd79317b3cebc">Type</a>() == <a class="code" href="classmocha_1_1_class_expandar.html#ab2e8fbff2016d78e9eb128f90e1fc7dfaf61e7f3912848c1da2126eb296ae0da9">ClassExpandar::kExtends</a> )?
<a name="l00512"></a>00512         <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a005825659562ff7c0ded8e655bc6e17c">SymbolList::kExtendClass</a> ) :
<a name="l00513"></a>00513         <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4af1124f9a4ee857f87ebbe2569b559e7a">SymbolList::kExtendPrototype</a> );
<a name="l00514"></a>00514     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* tmp_node = <a class="code" href="classmocha_1_1_ast_utils.html#ab6fce222ac8de9e29710fdacc83e5b92">AstUtils::CreateTmpNode</a>( <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#a0b8fab810d5059ef5d6f09c3e6ef4a78">GetTmpIndex</a>() );
<a name="l00515"></a>00515     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* tmp_init = <a class="code" href="classmocha_1_1_ast_utils.html#a9fcb6a0bd018a4d1a98c600287f5db18">AstUtils::CreateVarInitiliser</a>( tmp_node-&gt;<a class="code" href="classmocha_1_1_value_node.html#a769c0c221283cca863964f6cf673c170">Symbol</a>() , node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>() );
<a name="l00516"></a>00516     <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* var_stmt = <a class="code" href="classmocha_1_1_ast_utils.html#aa7d849cc4fe5b84c9aa80c81904931fb">AstUtils::CreateVarStmt</a>( tmp_init );
<a name="l00517"></a>00517     <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( var_stmt );
<a name="l00518"></a>00518     
<a name="l00519"></a>00519     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* extend = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( extend_fn,
<a name="l00520"></a>00520                                                   <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00521"></a>00521     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_prop = <a class="code" href="classmocha_1_1_ast_utils.html#ad4547f1789aba2e0857a51a02312b7ca">AstUtils::CreateRuntimeMod</a>( extend );
<a name="l00522"></a>00522     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* arg = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00523"></a>00523     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* class_name = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str(),
<a name="l00524"></a>00524                                                   <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00525"></a>00525     arg-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( class_name );
<a name="l00526"></a>00526     arg-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( tmp_node-&gt;<a class="code" href="classmocha_1_1_value_node.html#a960b13fc3b0e5544518b64a393f4c272">Clone</a>() );
<a name="l00527"></a>00527     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* normal_fn_call = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( runtime_prop , arg );
<a name="l00528"></a>00528     <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( normal_fn_call );
<a name="l00529"></a>00529     stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00530"></a>00530     <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00531"></a>00531     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* super_obj = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4ab4c6f567e54f9fbe3f66dd7ff97b468c">SymbolList::kSuper</a> ),
<a name="l00532"></a>00532                                                      <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00533"></a>00533     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* create_super = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4aab36f1178144ba1fbc88bce0785a6c54">SymbolList::kGetSuper</a> ),
<a name="l00534"></a>00534                                                         <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00535"></a>00535     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* super_args = <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 1 , tmp_node-&gt;<a class="code" href="classmocha_1_1_value_node.html#a960b13fc3b0e5544518b64a393f4c272">Clone</a>() );
<a name="l00536"></a>00536     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* create_super_call = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( create_super , super_args );
<a name="l00537"></a>00537     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_exp = <a class="code" href="classmocha_1_1_ast_utils.html#ad4547f1789aba2e0857a51a02312b7ca">AstUtils::CreateRuntimeMod</a>( create_super_call );
<a name="l00538"></a>00538     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* var_init = <a class="code" href="classmocha_1_1_ast_utils.html#a9fcb6a0bd018a4d1a98c600287f5db18">AstUtils::CreateVarInitiliser</a>( super_obj-&gt;<a class="code" href="classmocha_1_1_value_node.html#a769c0c221283cca863964f6cf673c170">Symbol</a>() , runtime_exp );
<a name="l00539"></a>00539     <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* runtime_super_stmt = <a class="code" href="classmocha_1_1_ast_utils.html#aa7d849cc4fe5b84c9aa80c81904931fb">AstUtils::CreateVarStmt</a>( var_init );
<a name="l00540"></a>00540     <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( runtime_super_stmt );
<a name="l00541"></a>00541   }
<a name="l00542"></a>00542 }
<a name="l00543"></a>00543 
<a name="l00544"></a>00544 
<a name="l00545"></a><a class="code" href="classmocha_1_1_class_processor.html#a7dbd185d12ed689e75c48d9443dd8ef3">00545</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a7dbd185d12ed689e75c48d9443dd8ef3">ClassProcessor::ProcessBody_</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* body ) {
<a name="l00546"></a>00546   <span class="keywordflow">if</span> ( !body-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a31dd8fcdbeb4b1a6aae660a64a1aac99">IsEmpty</a>() ) {
<a name="l00547"></a>00547     <a class="code" href="classmocha_1_1_class_processor.html#a8867933a1814c7e9434701bfd82b4e8f">ProcessMember_</a>( reinterpret_cast&lt;ClassProperties*&gt;( body ) );
<a name="l00548"></a>00548   } <span class="keywordflow">else</span> {
<a name="l00549"></a>00549     <a class="code" href="classmocha_1_1_class_processor.html#a13e7dbbc74820beeb82e2a6843801b4f">CreateEmptyConstructor_</a>();
<a name="l00550"></a>00550   }
<a name="l00551"></a>00551 }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553 
<a name="l00554"></a>00554 
<a name="l00555"></a><a class="code" href="classmocha_1_1_class_processor.html#a8867933a1814c7e9434701bfd82b4e8f">00555</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a8867933a1814c7e9434701bfd82b4e8f">ClassProcessor::ProcessMember_</a>( <a class="code" href="classmocha_1_1_class_properties.html">ClassProperties</a>* body ) {
<a name="l00556"></a>00556   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* public_list = body-&gt;<a class="code" href="classmocha_1_1_class_properties.html#ae945b72acc7f9a701f9a61e00a3ec9dc">Public</a>();
<a name="l00557"></a>00557   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* private_list = body-&gt;<a class="code" href="classmocha_1_1_class_properties.html#adc301e4d0c434d6537d101fc23db19d3">Private</a>();
<a name="l00558"></a>00558   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* prototype_list = body-&gt;<a class="code" href="classmocha_1_1_class_properties.html#af59dbd12054895607ef186c44a59f2af">Prototype</a>();
<a name="l00559"></a>00559   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* public_static_list = body-&gt;<a class="code" href="classmocha_1_1_class_properties.html#a2b60d8c5f8b29d998cd74c3e4b767658">PublicStatic</a>();
<a name="l00560"></a>00560   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* private_static_list = body-&gt;<a class="code" href="classmocha_1_1_class_properties.html#aff4897dba124ff17be9ea89b66d90964">PrivateStatic</a>();
<a name="l00561"></a>00561   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* constructor_decl = body-&gt;<a class="code" href="classmocha_1_1_class_properties.html#a9c7a8006b1a474f673b90eba72fc9830">Constructor</a>();
<a name="l00562"></a>00562   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* mixin = body-&gt;<a class="code" href="classmocha_1_1_class_properties.html#accf89b68e8f8882a8fdc6451316847a0">Mixin</a>();
<a name="l00563"></a>00563 
<a name="l00564"></a>00564   <span class="keywordflow">if</span> ( constructor_decl ) {
<a name="l00565"></a>00565     <a class="code" href="classmocha_1_1_function.html">Function</a>* constructor = constructor_decl-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#aece953ac3a588a8d731d258e4e7e57d9">CastToExpression</a>()-&gt;<a class="code" href="classmocha_1_1_expression.html#a56027507124496007854f768cd847d52">CastToFunction</a>();
<a name="l00566"></a>00566     <a class="code" href="classmocha_1_1_class_processor.html#a58b2732fd5cca6a818c342585c67aff6">constructor_</a> = constructor;
<a name="l00567"></a>00567     constructor-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( constructor_decl-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00568"></a>00568     <a class="code" href="classmocha_1_1_class_processor.html#ab3b3b1a0e1a9005442e223292b3eb019">ProcessConstructor_</a>( constructor );
<a name="l00569"></a>00569   } <span class="keywordflow">else</span> {
<a name="l00570"></a>00570     <a class="code" href="classmocha_1_1_class_processor.html#a13e7dbbc74820beeb82e2a6843801b4f">CreateEmptyConstructor_</a>();
<a name="l00571"></a>00571   }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573   <a class="code" href="classmocha_1_1_class_processor.html#a969b4c75a350c276cf1a46d51d6590c0">IterateMember_</a>( public_list , <span class="keyword">true</span> , <span class="keyword">false</span> , <span class="keyword">false</span> );
<a name="l00574"></a>00574   <a class="code" href="classmocha_1_1_class_processor.html#a969b4c75a350c276cf1a46d51d6590c0">IterateMember_</a>( private_list , <span class="keyword">true</span> , <span class="keyword">true</span> , <span class="keyword">false</span> );
<a name="l00575"></a>00575   <a class="code" href="classmocha_1_1_class_processor.html#a969b4c75a350c276cf1a46d51d6590c0">IterateMember_</a>( prototype_list , <span class="keyword">true</span> , <span class="keyword">true</span> , <span class="keyword">false</span> );
<a name="l00576"></a>00576   <a class="code" href="classmocha_1_1_class_processor.html#a969b4c75a350c276cf1a46d51d6590c0">IterateMember_</a>( public_static_list , <span class="keyword">false</span> , <span class="keyword">false</span> , <span class="keyword">false</span> );
<a name="l00577"></a>00577   <a class="code" href="classmocha_1_1_class_processor.html#a969b4c75a350c276cf1a46d51d6590c0">IterateMember_</a>( private_static_list , <span class="keyword">false</span> , <span class="keyword">true</span> , <span class="keyword">false</span> );
<a name="l00578"></a>00578   <span class="keywordflow">if</span> ( mixin-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6ecb0925a6380a375a92451256039d7f">ChildLength</a>() &gt; 0 ) {
<a name="l00579"></a>00579     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* mixin_list = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a29af6b8e270cc7ff00c9ed19ec06daaa">CreateMixin</a>( mixin , <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a> );
<a name="l00580"></a>00580     <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a5a63e6c4b0567dfa908eeed3ac896ede">CreateMixinStmt</a>( <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str() , mixin_list , <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a> );
<a name="l00581"></a>00581     <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a66a15724e9fc5b217b958550c6911016">CreateRequirementsCheck</a>( <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str() , <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#a1c2620c43282cf2aaf90fe2ec448f9bd">GetRelativePath</a>() , mixin_list , <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a> );
<a name="l00582"></a>00582   }
<a name="l00583"></a>00583 }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 
<a name="l00587"></a><a class="code" href="classmocha_1_1_class_processor.html#ab3b3b1a0e1a9005442e223292b3eb019">00587</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#ab3b3b1a0e1a9005442e223292b3eb019">ClassProcessor::ProcessConstructor_</a>( <a class="code" href="classmocha_1_1_function.html">Function</a>* constructor ) {
<a name="l00588"></a>00588   <a class="code" href="classmocha_1_1_i_visitor.html">IVisitor</a>* visitor = <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>();
<a name="l00589"></a>00589   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( constructor );
<a name="l00590"></a>00590   <a class="code" href="classmocha_1_1_function.html">Function</a> *backup = <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>;
<a name="l00591"></a>00591   <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = constructor-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00592"></a>00592   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a> = constructor;
<a name="l00593"></a>00593   <span class="keywordflow">while</span> ( iterator.<a class="code" href="classmocha_1_1_node_iterator.html#ae3ce9ed39cc570c83549498c121c0150">HasNext</a>() ) {
<a name="l00594"></a>00594     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = iterator.<a class="code" href="classmocha_1_1_node_iterator.html#acc2e3f06c89bb07d2d64f2c024900d5b">Next</a>();
<a name="l00595"></a>00595     <span class="keywordflow">if</span> ( item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a930b6f930cbe0efddfde28ec73c200bc">NodeType</a>() == <a class="code" href="classmocha_1_1_ast_node.html#a7e049e71bcf600466f1c977205d8215ba071250de21f793faa3a9b2865be6ae23">AstNode::kClassMember</a> ) {
<a name="l00596"></a>00596       <a class="code" href="classmocha_1_1_class_member.html">ClassMember</a>* member = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classmocha_1_1_class_member.html">ClassMember</a>*<span class="keyword">&gt;</span>( item );
<a name="l00597"></a>00597       <span class="keywordflow">if</span> ( member-&gt;<a class="code" href="classmocha_1_1_class_member.html#a67bde775e5f9aac233c5b163cc3b78d3">Attr</a>() == <a class="code" href="classmocha_1_1_class_member.html#a3b8ac727565cfee0a488ff72a692315ca93091b1c2b66dc7b64f161785f7a989b">ClassMember::kPrivate</a> ) {
<a name="l00598"></a>00598         <a class="code" href="classmocha_1_1_class_processor.html#a3249aa54768ef4f9f17c83ba011ee017">ProcessEachMember_</a>( member-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>() , false , true , true );
<a name="l00599"></a>00599       } <span class="keywordflow">else</span> {
<a name="l00600"></a>00600         <a class="code" href="classmocha_1_1_class_processor.html#a3249aa54768ef4f9f17c83ba011ee017">ProcessEachMember_</a>( member-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>() , false , false , true );
<a name="l00601"></a>00601       }
<a name="l00602"></a>00602     }
<a name="l00603"></a>00603   }
<a name="l00604"></a>00604   constructor-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( visitor );
<a name="l00605"></a>00605   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a> = backup;
<a name="l00606"></a>00606   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ab56c8f661100300b99a4ef01cca8ba11">SetMark</a>( constructor ) );
<a name="l00607"></a>00607 }
<a name="l00608"></a>00608 
<a name="l00609"></a>00609 
<a name="l00610"></a><a class="code" href="classmocha_1_1_class_processor.html#a13e7dbbc74820beeb82e2a6843801b4f">00610</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a13e7dbbc74820beeb82e2a6843801b4f">ClassProcessor::CreateEmptyConstructor_</a>() {
<a name="l00611"></a>00611   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* constructor = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66ad5d08f4ad6f83aaf4a1aa9fbc4dd1a71">SymbolList::kConstructor</a> ),
<a name="l00612"></a>00612                                                      <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa31d9591b4608e04caeb5f7642045700a">Token::JS_IDENTIFIER</a> , <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00613"></a>00613   <a class="code" href="classmocha_1_1_function.html">Function</a>* fn = <a class="code" href="classmocha_1_1_ast_utils.html#a2b150de7953f29e5c94c7e9d110a6d97">AstUtils::CreateFunctionDecl</a>( constructor , ManagedHandle::Retain&lt;Empty&gt;() , ManagedHandle::Retain&lt;Empty&gt;() );
<a name="l00614"></a>00614   fn-&gt;Line( <a class="code" href="classmocha_1_1_class_processor.html#a15511bef8f5889e25f65d39d9f23d5df">class_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00615"></a>00615   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( fn );
<a name="l00616"></a>00616   <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ab56c8f661100300b99a4ef01cca8ba11">SetMark</a>( fn ) );
<a name="l00617"></a>00617 }
<a name="l00618"></a>00618 
<a name="l00619"></a><a class="code" href="classmocha_1_1_class_processor.html#a969b4c75a350c276cf1a46d51d6590c0">00619</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a969b4c75a350c276cf1a46d51d6590c0">ClassProcessor::IterateMember_</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a> *list , <span class="keywordtype">bool</span> is_prototype , <span class="keywordtype">bool</span> is_private , <span class="keywordtype">bool</span> is_instance ) {
<a name="l00620"></a>00620   <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00621"></a>00621   <span class="keywordflow">while</span> ( iterator.<a class="code" href="classmocha_1_1_node_iterator.html#ae3ce9ed39cc570c83549498c121c0150">HasNext</a>() ) {
<a name="l00622"></a>00622     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* member = iterator.<a class="code" href="classmocha_1_1_node_iterator.html#acc2e3f06c89bb07d2d64f2c024900d5b">Next</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>();
<a name="l00623"></a>00623     <a class="code" href="classmocha_1_1_class_processor.html#a3249aa54768ef4f9f17c83ba011ee017">ProcessEachMember_</a>( member , is_prototype , is_private , is_instance );
<a name="l00624"></a>00624   }
<a name="l00625"></a>00625 }
<a name="l00626"></a>00626 
<a name="l00627"></a>00627 
<a name="l00628"></a>00628 
<a name="l00629"></a><a class="code" href="classmocha_1_1_class_processor.html#a3249aa54768ef4f9f17c83ba011ee017">00629</a> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a3249aa54768ef4f9f17c83ba011ee017">ClassProcessor::ProcessEachMember_</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* node , <span class="keywordtype">bool</span> is_prototype , <span class="keywordtype">bool</span> is_private , <span class="keywordtype">bool</span> is_instance ) {
<a name="l00630"></a>00630   <span class="keywordflow">switch</span> ( node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a930b6f930cbe0efddfde28ec73c200bc">NodeType</a>() ) {
<a name="l00631"></a>00631 
<a name="l00632"></a>00632     <span class="keywordflow">case</span> <a class="code" href="classmocha_1_1_ast_node.html#a7e049e71bcf600466f1c977205d8215ba89199c1beaef2cec34bfff96430a1f30">AstNode::kFunction</a> : {
<a name="l00633"></a>00633       <a class="code" href="classmocha_1_1_class_processor.html#a0aa858fe5ebd728e0e2aedda5a935223">ProcessFunction_</a>( reinterpret_cast&lt;Function*&gt;( node ) , is_prototype , is_private , is_instance );
<a name="l00634"></a>00634     }
<a name="l00635"></a>00635       <span class="keywordflow">break</span>;
<a name="l00636"></a>00636       
<a name="l00637"></a>00637     <span class="keywordflow">case</span> <a class="code" href="classmocha_1_1_ast_node.html#a7e049e71bcf600466f1c977205d8215ba8c24bef501c2e740aa2f6c86a6d040b9">AstNode::kValueNode</a> : {
<a name="l00638"></a>00638       <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* child_node = node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>()-&gt;<a class="code" href="classmocha_1_1_value_node.html#a88025ff701eebee191dc5783a2c161c7">Node</a>();
<a name="l00639"></a>00639       <a class="code" href="classmocha_1_1_class_processor.html#a40cdf4b1db8f25a96934ac25a3907a0f">ProcessVariable_</a>( child_node , is_prototype , is_private , is_instance , <span class="keyword">true</span> );
<a name="l00640"></a>00640     }
<a name="l00641"></a>00641       <span class="keywordflow">break</span>;
<a name="l00642"></a>00642       
<a name="l00643"></a>00643     <span class="keywordflow">case</span> <a class="code" href="classmocha_1_1_ast_node.html#a7e049e71bcf600466f1c977205d8215ba10d875bdca7c3e5ec5f9b0043557cc9d">AstNode::kNodeList</a> : {
<a name="l00644"></a>00644       <a class="code" href="classmocha_1_1_class_processor.html#a40cdf4b1db8f25a96934ac25a3907a0f">ProcessVariable_</a>( node , is_prototype , is_private , is_instance , <span class="keyword">false</span> );
<a name="l00645"></a>00645     }
<a name="l00646"></a>00646       <span class="keywordflow">break</span>;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     <span class="keywordflow">case</span> <a class="code" href="classmocha_1_1_ast_node.html#a7e049e71bcf600466f1c977205d8215ba19e38aca156e3755e63d90d567bfa9cc">AstNode::kClass</a> : {
<a name="l00649"></a>00649       <a class="code" href="classmocha_1_1_statement.html">Statement</a>* tmp_stmt = ManagedHandle::Retain&lt;Statement&gt;();
<a name="l00650"></a>00650       <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#a8fa66ab61209f68899be1bbb4c56657c">SetCurrentStmt</a>( tmp_stmt );
<a name="l00651"></a>00651       <a class="code" href="classmocha_1_1_class.html">Class</a>* class_node = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classmocha_1_1_class.html">Class</a>*<span class="keyword">&gt;</span>( node );
<a name="l00652"></a>00652       class_node-&gt;<a class="code" href="classmocha_1_1_class.html#aa0211babf6c2749339b01df68007e25e">Inner</a>( <span class="keyword">true</span> );
<a name="l00653"></a>00653       <a class="code" href="classmocha_1_1_class_processor.html">ClassProcessor</a> *cls = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_class_processor.html#a08d136f952bf8924f0937c36a8af840f">ClassProcessor</a>( <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a> , class_node , tmp_stmt ) );
<a name="l00654"></a>00654       cls-&gt;<a class="code" href="classmocha_1_1_class_processor.html#aa860cc22cd327b79d9c8aedb19c7667a">ProcessNode</a>();
<a name="l00655"></a>00655       <a class="code" href="classmocha_1_1_class_processor.html#a40cdf4b1db8f25a96934ac25a3907a0f">ProcessVariable_</a>( class_node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>() , is_prototype , is_private , is_instance , class_node-&gt;<a class="code" href="classmocha_1_1_class.html#a92570a6f6bf128a8a1b1c6209ebd42b3">Const</a>() );
<a name="l00656"></a>00656     }
<a name="l00657"></a>00657   }
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 
<a name="l00662"></a>00662 
<a name="l00663"></a>00663 
<a name="l00664"></a>00664 
<a name="l00665"></a>00665 
<a name="l00666"></a><a class="code" href="classmocha_1_1_class_processor.html#a9e4f585d68f25b950405231dd2fb94c2">00666</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a9e4f585d68f25b950405231dd2fb94c2">ClassProcessor::ProcessDsta_</a>( <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a> *value,
<a name="l00667"></a>00667                                           <span class="keywordtype">bool</span> is_const,
<a name="l00668"></a>00668                                           <a class="code" href="namespacemocha.html#ac3d8a2fe64806b144916b0b16719a540">DstaCallback</a> callback ) {
<a name="l00669"></a>00669   <a class="code" href="classmocha_1_1_statement.html">Statement</a>* tmp_stmt = ManagedHandle::Retain&lt;Statement&gt;();
<a name="l00670"></a>00670   <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#a8fa66ab61209f68899be1bbb4c56657c">SetCurrentStmt</a>( tmp_stmt );
<a name="l00671"></a>00671   value-&gt;<a class="code" href="classmocha_1_1_value_node.html#a88025ff701eebee191dc5783a2c161c7">Node</a>()-&gt;Accept( <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00672"></a>00672   <span class="keywordflow">if</span> ( tmp_stmt-&gt;<a class="code" href="classmocha_1_1_statement.html#a348f368ee5c22018059510067ceeaead">HasDsta</a>() ) {
<a name="l00673"></a>00673     value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1babcec8f8a2acd9a985dbd67c79f2ad9d5">ValueNode::kVariable</a> );
<a name="l00674"></a>00674     value-&gt;<a class="code" href="classmocha_1_1_value_node.html#a769c0c221283cca863964f6cf673c170">Symbol</a>( value-&gt;<a class="code" href="classmocha_1_1_value_node.html#a88025ff701eebee191dc5783a2c161c7">Node</a>()-&gt;CastToValue()-&gt;Symbol() );
<a name="l00675"></a>00675     <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#aa7d849cc4fe5b84c9aa80c81904931fb">AstUtils::CreateVarStmt</a>( value );
<a name="l00676"></a>00676     stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00677"></a>00677     <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00678"></a>00678     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* list = <a class="code" href="classmocha_1_1_dsta_processor.html#a9323e86b8a5d1857db8a1e186ee4fd3f" title="Create a variable statement, from the results of analyzing dsta expressions.">DstaProcessor::CreateDstaExtractedVarStmt</a>( tmp_stmt , <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a> );
<a name="l00679"></a>00679     <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00680"></a>00680     <span class="keywordflow">while</span> ( iterator.<a class="code" href="classmocha_1_1_node_iterator.html#ae3ce9ed39cc570c83549498c121c0150">HasNext</a>() ) {
<a name="l00681"></a>00681       <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* dsta_value = iterator.<a class="code" href="classmocha_1_1_node_iterator.html#acc2e3f06c89bb07d2d64f2c024900d5b">Next</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>();
<a name="l00682"></a>00682       dsta_value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00683"></a>00683       dsta_value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba9076c94a3f40287b5942daca9d41b711">ValueNode::kIdentifier</a> );
<a name="l00684"></a>00684       ( <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;*callback )( <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str() , <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a> , dsta_value , is_const );
<a name="l00685"></a>00685     }
<a name="l00686"></a>00686   }
<a name="l00687"></a>00687 }
<a name="l00688"></a>00688 
<a name="l00689"></a>00689 
<a name="l00690"></a>00690 
<a name="l00691"></a><a class="code" href="classmocha_1_1_class_processor.html#a59da2ad99788e504c991b465c35462e3">00691</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a59da2ad99788e504c991b465c35462e3">ClassProcessor::SimpleVariables_</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* node , <span class="keywordtype">bool</span> is_const ) {
<a name="l00692"></a>00692   <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00693"></a>00693   <span class="keywordflow">while</span> ( iterator.<a class="code" href="classmocha_1_1_node_iterator.html#ae3ce9ed39cc570c83549498c121c0150">HasNext</a>() ) {
<a name="l00694"></a>00694     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = iterator.<a class="code" href="classmocha_1_1_node_iterator.html#acc2e3f06c89bb07d2d64f2c024900d5b">Next</a>();
<a name="l00695"></a>00695     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>();
<a name="l00696"></a>00696     <span class="keywordflow">if</span> ( value ) {
<a name="l00697"></a>00697       <span class="keywordflow">if</span> ( value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>() == <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba7dd7e98941f05c893b04c6aed9e00fb1">ValueNode::kDst</a> ) {
<a name="l00698"></a>00698         <a class="code" href="classmocha_1_1_class_processor.html#a9e4f585d68f25b950405231dd2fb94c2">ProcessDsta_</a>( value , is_const , &amp;<a class="code" href="classmocha_1_1_class_processor_utils.html#ac3bfe46eb0acef03d504b0c6724fb7b4">ClassProcessorUtils::PrototypePrivateDsta</a> );
<a name="l00699"></a>00699       } <span class="keywordflow">else</span> {
<a name="l00700"></a>00700         value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00701"></a>00701         <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* result = 0;
<a name="l00702"></a>00702         <span class="keywordflow">if</span> ( is_const ) {
<a name="l00703"></a>00703           result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#af5b9c37de2825626bf80a70c43d41c00">ConstantPrototypePrivate</a>( value , <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">GetSafeValue</a>( value ) );
<a name="l00704"></a>00704         } <span class="keywordflow">else</span> {
<a name="l00705"></a>00705           result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a4b47f30d7968755e17db302f8fe7bf9c">PrototypePrivate</a>( value , <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">GetSafeValue</a>( value ) );
<a name="l00706"></a>00706         }
<a name="l00707"></a>00707         result-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00708"></a>00708         <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( result );
<a name="l00709"></a>00709       }
<a name="l00710"></a>00710     }
<a name="l00711"></a>00711   }
<a name="l00712"></a>00712 }
<a name="l00713"></a>00713 
<a name="l00714"></a>00714 
<a name="l00715"></a>00715 
<a name="l00716"></a><a class="code" href="classmocha_1_1_class_processor.html#a857e9b17c939e57efbb0b737cbd956dd">00716</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a857e9b17c939e57efbb0b737cbd956dd">ClassProcessor::NoSimpleVariables_</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* node,
<a name="l00717"></a>00717                                                 <span class="keywordtype">bool</span> is_prototype,
<a name="l00718"></a>00718                                                 <span class="keywordtype">bool</span> is_private,
<a name="l00719"></a>00719                                                 <span class="keywordtype">bool</span> is_instance,
<a name="l00720"></a>00720                                                 <span class="keywordtype">bool</span> is_const ) {
<a name="l00721"></a>00721 
<a name="l00722"></a>00722   <span class="keyword">const</span> <span class="keywordtype">char</span>* class_name = <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str();
<a name="l00723"></a>00723   <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00724"></a>00724   <span class="keywordflow">while</span> ( iterator.<a class="code" href="classmocha_1_1_node_iterator.html#ae3ce9ed39cc570c83549498c121c0150">HasNext</a>() ) {
<a name="l00725"></a>00725     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value = iterator.<a class="code" href="classmocha_1_1_node_iterator.html#acc2e3f06c89bb07d2d64f2c024900d5b">Next</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>();
<a name="l00726"></a>00726     <span class="keywordflow">if</span> ( value ) {
<a name="l00727"></a>00727       <span class="keywordflow">if</span> ( value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>() == <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba7dd7e98941f05c893b04c6aed9e00fb1">ValueNode::kDst</a> ) {
<a name="l00728"></a>00728         <span class="keywordflow">if</span> ( !is_instance &amp;&amp; !is_prototype ) {
<a name="l00729"></a>00729           <span class="keywordflow">if</span> ( !is_private ) {
<a name="l00730"></a>00730             <a class="code" href="classmocha_1_1_class_processor.html#a9e4f585d68f25b950405231dd2fb94c2">ProcessDsta_</a>( value , is_const , &amp;<a class="code" href="classmocha_1_1_class_processor_utils.html#a86c2ceefe5e02737d5a0a9e8afcc7db1">ClassProcessorUtils::PublicStaticDsta</a> );
<a name="l00731"></a>00731           } <span class="keywordflow">else</span> {
<a name="l00732"></a>00732             <a class="code" href="classmocha_1_1_class_processor.html#a9e4f585d68f25b950405231dd2fb94c2">ProcessDsta_</a>( value , is_const , &amp;<a class="code" href="classmocha_1_1_class_processor_utils.html#ac5b625457ddf992f3b22b9e3a1bdee30">ClassProcessorUtils::PrivateStaticDsta</a> );
<a name="l00733"></a>00733           }
<a name="l00734"></a>00734         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( is_prototype ) {
<a name="l00735"></a>00735           <a class="code" href="classmocha_1_1_class_processor.html#a9e4f585d68f25b950405231dd2fb94c2">ProcessDsta_</a>( value , is_const , &amp;<a class="code" href="classmocha_1_1_class_processor_utils.html#ad30031d6087cd77d4d2cc6763c05352f">ClassProcessorUtils::PrototypePublicDsta</a> );
<a name="l00736"></a>00736         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( is_private ){
<a name="l00737"></a>00737           <a class="code" href="classmocha_1_1_class_processor.html#a9e4f585d68f25b950405231dd2fb94c2">ProcessDsta_</a>( value , is_const , &amp;<a class="code" href="classmocha_1_1_class_processor_utils.html#a2b746fe441de3ed55f5ec11f6f5172d8">ClassProcessorUtils::InstancePrivateDsta</a> );
<a name="l00738"></a>00738         } <span class="keywordflow">else</span> {
<a name="l00739"></a>00739           <a class="code" href="classmocha_1_1_class_processor.html#a9e4f585d68f25b950405231dd2fb94c2">ProcessDsta_</a>( value , is_const , &amp;<a class="code" href="classmocha_1_1_class_processor_utils.html#afeb3b1bdc113c10b8417e1e9d217042a">ClassProcessorUtils::InstancePublicDsta</a> );
<a name="l00740"></a>00740         }
<a name="l00741"></a>00741       } <span class="keywordflow">else</span> {
<a name="l00742"></a>00742         <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* result = 0;
<a name="l00743"></a>00743         value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00744"></a>00744         <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* safe_val = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a4745971a910122bc31e366c0fa49f114">GetSafeValue</a>( value );
<a name="l00745"></a>00745         <span class="keywordflow">if</span> ( !is_instance &amp;&amp; !is_prototype ) {
<a name="l00746"></a>00746           <span class="keywordflow">if</span> ( !is_private ) {
<a name="l00747"></a>00747             <span class="keywordflow">if</span> ( is_const ) {
<a name="l00748"></a>00748               result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a3d84ff9ef3f2d4082396169e1b99f6bb">PublicConstantStatic</a>( class_name , value , safe_val );
<a name="l00749"></a>00749             } <span class="keywordflow">else</span> {
<a name="l00750"></a>00750               result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a28a8c9dae3d507054c521d4b8f5e1830">PublicStatic</a>( class_name , value , safe_val );
<a name="l00751"></a>00751             }
<a name="l00752"></a>00752           } <span class="keywordflow">else</span> {
<a name="l00753"></a>00753             <span class="keywordflow">if</span> ( is_const ) {
<a name="l00754"></a>00754               result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ab81285773872b9fb9cdd7ceb33ad6f2a">PrivateConstantStatic</a>( value , safe_val );
<a name="l00755"></a>00755             } <span class="keywordflow">else</span> {
<a name="l00756"></a>00756               result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ac59461d97ab0bb6da1f1ad0024e85e1f">PrivateStatic</a>( value , safe_val );
<a name="l00757"></a>00757             }
<a name="l00758"></a>00758           }
<a name="l00759"></a>00759         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( is_prototype ) {
<a name="l00760"></a>00760           <span class="keywordflow">if</span> ( is_const ) {
<a name="l00761"></a>00761             result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a50068b6d373030e45c8c57a0eee045c4">ConstantPrototypePublic</a>( class_name , value , safe_val );
<a name="l00762"></a>00762           } <span class="keywordflow">else</span> {
<a name="l00763"></a>00763             result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ac931857f4f62031b1ba249cf233da5c1">PrototypePublic</a>( class_name , value , safe_val );
<a name="l00764"></a>00764           }
<a name="l00765"></a>00765         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( is_private ) {
<a name="l00766"></a>00766           <span class="keywordflow">if</span> ( is_const ) {
<a name="l00767"></a>00767             result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#abe05538ee0cc20be8f3740d05db761ae">ConstantInstancePrivate</a>( value );
<a name="l00768"></a>00768           } <span class="keywordflow">else</span> {
<a name="l00769"></a>00769             result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a2ff3e378a45327df8060e236970407b8">InstancePrivate</a>( value );
<a name="l00770"></a>00770           }
<a name="l00771"></a>00771         } <span class="keywordflow">else</span> {
<a name="l00772"></a>00772           <span class="keywordflow">if</span> ( is_const ) {
<a name="l00773"></a>00773             result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ad239680f421167da1c307681f6b81197">ConstantInstancePublic</a>( value );
<a name="l00774"></a>00774           } <span class="keywordflow">else</span> {
<a name="l00775"></a>00775             result = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a425461673b00f5f837a893277b4d14cf">InstancePublic</a>( value );
<a name="l00776"></a>00776           }
<a name="l00777"></a>00777         }
<a name="l00778"></a>00778         result-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00779"></a>00779         <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( result );
<a name="l00780"></a>00780       }
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782   }
<a name="l00783"></a>00783 }
<a name="l00784"></a>00784 
<a name="l00785"></a>00785 
<a name="l00786"></a><a class="code" href="classmocha_1_1_class_processor.html#a40cdf4b1db8f25a96934ac25a3907a0f">00786</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a40cdf4b1db8f25a96934ac25a3907a0f">ClassProcessor::ProcessVariable_</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* node,
<a name="l00787"></a>00787                                               <span class="keywordtype">bool</span> is_prototype,
<a name="l00788"></a>00788                                               <span class="keywordtype">bool</span> is_private,
<a name="l00789"></a>00789                                               <span class="keywordtype">bool</span> is_instance,
<a name="l00790"></a>00790                                               <span class="keywordtype">bool</span> is_const ) {
<a name="l00791"></a>00791   <span class="keywordflow">if</span> ( is_private &amp;&amp; is_prototype ) {
<a name="l00792"></a>00792     <a class="code" href="classmocha_1_1_class_processor.html#a59da2ad99788e504c991b465c35462e3">SimpleVariables_</a>( node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#af2a895699bac2012f8b7739bff49c5ec">Clone</a>() , is_const );
<a name="l00793"></a>00793   } <span class="keywordflow">else</span> {
<a name="l00794"></a>00794     <a class="code" href="classmocha_1_1_class_processor.html#a857e9b17c939e57efbb0b737cbd956dd">NoSimpleVariables_</a>( node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#af2a895699bac2012f8b7739bff49c5ec">Clone</a>() , is_prototype , is_private , is_instance , is_const );
<a name="l00795"></a>00795   }
<a name="l00796"></a>00796 }
<a name="l00797"></a>00797 
<a name="l00798"></a>00798 
<a name="l00799"></a>00799 
<a name="l00800"></a><a class="code" href="classmocha_1_1_class_processor.html#a0aa858fe5ebd728e0e2aedda5a935223">00800</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_class_processor.html#a0aa858fe5ebd728e0e2aedda5a935223">ClassProcessor::ProcessFunction_</a>( <a class="code" href="classmocha_1_1_function.html">Function</a>* fn , <span class="keywordtype">bool</span> is_prototype , <span class="keywordtype">bool</span> is_private , <span class="keywordtype">bool</span> is_instance ) {
<a name="l00801"></a>00801   fn = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classmocha_1_1_function.html">Function</a>*<span class="keyword">&gt;</span>( fn-&gt;<a class="code" href="classmocha_1_1_function.html#a787dcc9695496b521f0de87094003c7a">Clone</a>() );
<a name="l00802"></a>00802   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value = fn-&gt;<a class="code" href="classmocha_1_1_function.html#a519eeb5120164a9a77734db8c0de3ca8">Name</a>()-&gt;CastToValue();
<a name="l00803"></a>00803   <span class="keyword">const</span> <span class="keywordtype">char</span>* class_name = <a class="code" href="classmocha_1_1_class_processor.html#a6cee088c1f255c143fcba53994102461">name_</a>.c_str();
<a name="l00804"></a>00804   value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00805"></a>00805   <span class="keywordflow">if</span> ( !is_instance &amp;&amp; !is_prototype ) {
<a name="l00806"></a>00806     fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00807"></a>00807     <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt;
<a name="l00808"></a>00808     <span class="keywordflow">if</span> ( !is_private ) {
<a name="l00809"></a>00809       stmt = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a28a8c9dae3d507054c521d4b8f5e1830">PublicStatic</a>( class_name , value , fn );
<a name="l00810"></a>00810     } <span class="keywordflow">else</span> {
<a name="l00811"></a>00811       stmt = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ac59461d97ab0bb6da1f1ad0024e85e1f">PrivateStatic</a>( value , fn );
<a name="l00812"></a>00812     }
<a name="l00813"></a>00813     stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00814"></a>00814     <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00815"></a>00815   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( is_prototype ) {
<a name="l00816"></a>00816     <span class="keywordflow">if</span> ( is_private ) {
<a name="l00817"></a>00817       <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#a09618fd0fdcf2458086b857c328372a6">EnterPrivate</a>();
<a name="l00818"></a>00818       fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00819"></a>00819       <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#aa0750a6159e978164f92a3c84d89ea5a">EscapePrivate</a>();
<a name="l00820"></a>00820       <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a4b47f30d7968755e17db302f8fe7bf9c">PrototypePrivate</a>( value , fn );
<a name="l00821"></a>00821       stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00822"></a>00822       <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00823"></a>00823     } <span class="keywordflow">else</span> {
<a name="l00824"></a>00824       fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00825"></a>00825       <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ac931857f4f62031b1ba249cf233da5c1">PrototypePublic</a>( class_name , value , fn );
<a name="l00826"></a>00826       stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00827"></a>00827       <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00828"></a>00828     }
<a name="l00829"></a>00829   } <span class="keywordflow">else</span> {
<a name="l00830"></a>00830     <span class="keywordflow">if</span> ( is_private ) {
<a name="l00831"></a>00831       <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#a09618fd0fdcf2458086b857c328372a6">EnterPrivate</a>();
<a name="l00832"></a>00832       fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00833"></a>00833       <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>()-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#aa0750a6159e978164f92a3c84d89ea5a">EscapePrivate</a>();
<a name="l00834"></a>00834       <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#a4b47f30d7968755e17db302f8fe7bf9c">PrototypePrivate</a>( value , fn );
<a name="l00835"></a>00835       stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00836"></a>00836       <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00837"></a>00837     } <span class="keywordflow">else</span> {
<a name="l00838"></a>00838       fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( <a class="code" href="classmocha_1_1_class_processor.html#a4306a92ebfbd33320b8a485b0c420f27">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00839"></a>00839       <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_class_processor.html#ad51b7e60254b3eeaea78992996d00bcd">utils_</a>-&gt;<a class="code" href="classmocha_1_1_class_processor_utils.html#ac931857f4f62031b1ba249cf233da5c1">PrototypePublic</a>( class_name , value , fn );
<a name="l00840"></a>00840       stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>( fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00841"></a>00841       <a class="code" href="classmocha_1_1_class_processor.html#a224ba4a0c7686ccf21161a02550bf713">closure_body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( stmt );
<a name="l00842"></a>00842     }
<a name="l00843"></a>00843   }
<a name="l00844"></a>00844 }
<a name="l00845"></a>00845 
<a name="l00846"></a>00846 }
<a name="l00847"></a>00847 
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Feb 16 2012 23:50:16 for mocha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
