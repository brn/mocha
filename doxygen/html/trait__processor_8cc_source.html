<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mocha: Y:/mocha/src/ast/visitors/utils/processors/trait_processor.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mocha</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">Y:/mocha/src/ast/visitors/utils/processors/trait_processor.cc</div>  </div>
</div>
<div class="contents">
<a href="trait__processor_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &lt;<a class="code" href="ast_8h.html">ast/ast.h</a>&gt;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;<a class="code" href="ast__utils_8h.html">ast/utils/ast_utils.h</a>&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;<a class="code" href="visitor__info_8h.html">ast/visitors/utils/visitor_info.h</a>&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;<a class="code" href="processor__info_8h.html">ast/visitors/utils/processors/processor_info.h</a>&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;<a class="code" href="trait__processor_8h.html">ast/visitors/utils/processors/trait_processor.h</a>&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;<a class="code" href="managed__handle_8h.html">utils/pool/managed_handle.h</a>&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;<a class="code" href="symbol__list_8h.html">compiler/tokens/symbol_list.h</a>&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;<a class="code" href="js__token_8h.html">compiler/tokens/js_token.h</a>&gt;</span>
<a name="l00010"></a>00010 <span class="keyword">namespace </span>mocha {
<a name="l00011"></a>00011 
<a name="l00012"></a><a class="code" href="classmocha_1_1_trait_processor.html#ae38c5ff2f28feaa6cea6c60e6c5bc3cd">00012</a> <a class="code" href="classmocha_1_1_trait_processor.html#ae38c5ff2f28feaa6cea6c60e6c5bc3cd">TraitProcessor::TraitProcessor</a>( <a class="code" href="classmocha_1_1_trait.html">Trait</a>* trait , <a class="code" href="classmocha_1_1_processor_info.html">ProcessorInfo</a>* info ) :
<a name="l00013"></a>00013     trait_( trait ) , info_( info ) {}
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="classmocha_1_1_trait_processor.html#a01446e414e34d9f767199f52d9664834">00015</a> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_trait_processor.html#a01446e414e34d9f767199f52d9664834">TraitProcessor::ProcessNode</a>() {
<a name="l00016"></a>00016   <a class="code" href="classmocha_1_1_visitor_info.html">VisitorInfo</a>* visitor_info = <a class="code" href="classmocha_1_1_trait_processor.html#a90d1c88f5a7a093a2cfb2306e989769c">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>();
<a name="l00017"></a>00017   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name = <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_trait.html#a3f1195124d7c88187bf3a22123f4dbd6">GetName</a>();
<a name="l00018"></a>00018   <a class="code" href="classmocha_1_1_trait_processor.html#ab927330496a78fef533aa1c5cb6eb745">name_</a> = ( !name-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a31dd8fcdbeb4b1a6aae660a64a1aac99">IsEmpty</a>() )? name-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>() : <a class="code" href="classmocha_1_1_ast_utils.html#ab6fce222ac8de9e29710fdacc83e5b92">AstUtils::CreateTmpNode</a>( visitor_info-&gt;<a class="code" href="classmocha_1_1_visitor_info.html#a0b8fab810d5059ef5d6f09c3e6ef4a78">GetTmpIndex</a>() );
<a name="l00019"></a>00019   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* <span class="keywordtype">object</span> = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba839c61798b67a9f67787b8cd6c401a65">ValueNode::kObject</a> ) );
<a name="l00020"></a>00020   <span class="keywordtype">object</span>-&gt;Line( <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00021"></a>00021   <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* list = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00022"></a>00022   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* parent = <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>();
<a name="l00023"></a>00023   <span class="keywordflow">if</span> ( <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_trait.html#a33c183b34a3659aeb26fa11fbf08dc12">IsDecl</a>() ) {
<a name="l00024"></a>00024     <a class="code" href="classmocha_1_1_trait_processor.html#adee805716650a09bc1b81f79686e47fe">body_</a> = <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a508b893ad27be7285d6cf96737a2e549">ParentNode</a>();
<a name="l00025"></a>00025     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name_value = <a class="code" href="classmocha_1_1_trait_processor.html#ab927330496a78fef533aa1c5cb6eb745">name_</a>-&gt;<a class="code" href="classmocha_1_1_value_node.html#a960b13fc3b0e5544518b64a393f4c272">Clone</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>();
<a name="l00026"></a>00026     name_value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1babcec8f8a2acd9a985dbd67c79f2ad9d5">ValueNode::kVariable</a> );
<a name="l00027"></a>00027     name_value-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( <span class="keywordtype">object</span> );
<a name="l00028"></a>00028     <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#aa7d849cc4fe5b84c9aa80c81904931fb">AstUtils::CreateVarStmt</a>( name_value );
<a name="l00029"></a>00029     parent-&gt;ReplaceChild( <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a> , stmt );
<a name="l00030"></a>00030     <a class="code" href="classmocha_1_1_trait_processor.html#af646d1fded29a7b4ed32db4d041682e9">ProcessPrivate_</a>( list );
<a name="l00031"></a>00031     <a class="code" href="classmocha_1_1_trait_processor.html#af28b7da942c72a903f7a88151591603c">ProcessPublic_</a>( list );
<a name="l00032"></a>00032     <a class="code" href="classmocha_1_1_trait_processor.html#a963012039e428372c18689d0f6f7b438">ProcessRequires_</a>( list );
<a name="l00033"></a>00033     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* list = <a class="code" href="classmocha_1_1_trait_processor.html#ae2a0fac54c740889182958f3f62a7e30">ProcessMixin</a>( <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_trait.html#abab3b437c5e0baa9bafcc075f9324bac">GetMixinList</a>() , <a class="code" href="classmocha_1_1_trait_processor.html#a90d1c88f5a7a093a2cfb2306e989769c">info_</a> ,<a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00034"></a>00034     <a class="code" href="classmocha_1_1_trait_processor.html#a952d6c040be1e5429563b3752bff0d29">CreateMixinStmt_</a>( list , stmt );
<a name="l00035"></a>00035   } <span class="keywordflow">else</span> {
<a name="l00036"></a>00036     <a class="code" href="classmocha_1_1_function.html">Function</a>* fn = <a class="code" href="classmocha_1_1_ast_utils.html#a2b150de7953f29e5c94c7e9d110a6d97">AstUtils::CreateFunctionDecl</a>( ManagedHandle::Retain&lt;Empty&gt;() , ManagedHandle::Retain&lt;Empty&gt;() , ManagedHandle::Retain&lt;Empty&gt;() );
<a name="l00037"></a>00037     fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ababb12c547452f11a13727491d0a9f4b" title="Remove all child nodes.">RemoveAllChild</a>();
<a name="l00038"></a>00038     <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#ae8ac7a22a62b0cf12490efdd1c054045">AstUtils::CreateAnonymousFnCall</a>( fn , ManagedHandle::Retain&lt;Empty&gt;() );
<a name="l00039"></a>00039     <a class="code" href="classmocha_1_1_trait_processor.html#adee805716650a09bc1b81f79686e47fe">body_</a> = stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>();
<a name="l00040"></a>00040     parent-&gt;<a class="code" href="classmocha_1_1_ast_node.html#aa40396040f75fb59e320d81c3fd328c8">ReplaceChild</a>( <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a> , stmt-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>() );
<a name="l00041"></a>00041     <a class="code" href="classmocha_1_1_return_stmt.html">ReturnStmt</a>* ret = <a class="code" href="classmocha_1_1_ast_utils.html#acde244c3e7c6107360bc0340fa73e8ea">AstUtils::CreateReturnStmt</a>( <a class="code" href="classmocha_1_1_trait_processor.html#ab927330496a78fef533aa1c5cb6eb745">name_</a>-&gt;<a class="code" href="classmocha_1_1_value_node.html#a960b13fc3b0e5544518b64a393f4c272">Clone</a>() );
<a name="l00042"></a>00042     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name_value = <a class="code" href="classmocha_1_1_trait_processor.html#ab927330496a78fef533aa1c5cb6eb745">name_</a>-&gt;<a class="code" href="classmocha_1_1_value_node.html#a960b13fc3b0e5544518b64a393f4c272">Clone</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>();
<a name="l00043"></a>00043     name_value-&gt;<a class="code" href="classmocha_1_1_value_node.html#ae400f4a35352d1052dffc60290c290a0">ValueType</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1babcec8f8a2acd9a985dbd67c79f2ad9d5">ValueNode::kVariable</a> );
<a name="l00044"></a>00044     name_value-&gt;AddChild( <span class="keywordtype">object</span> );
<a name="l00045"></a>00045     <a class="code" href="classmocha_1_1_variable_stmt.html">VariableStmt</a>* var_stmt = <a class="code" href="classmocha_1_1_ast_utils.html#aa7d849cc4fe5b84c9aa80c81904931fb">AstUtils::CreateVarStmt</a>( name_value );
<a name="l00046"></a>00046     fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( var_stmt );
<a name="l00047"></a>00047     <a class="code" href="classmocha_1_1_trait_processor.html#af646d1fded29a7b4ed32db4d041682e9">ProcessPrivate_</a>( list );
<a name="l00048"></a>00048     <a class="code" href="classmocha_1_1_trait_processor.html#af28b7da942c72a903f7a88151591603c">ProcessPublic_</a>( list );
<a name="l00049"></a>00049     <a class="code" href="classmocha_1_1_trait_processor.html#a963012039e428372c18689d0f6f7b438">ProcessRequires_</a>( list );
<a name="l00050"></a>00050     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* list = <a class="code" href="classmocha_1_1_trait_processor.html#ae2a0fac54c740889182958f3f62a7e30">ProcessMixin</a>( <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_trait.html#abab3b437c5e0baa9bafcc075f9324bac">GetMixinList</a>() , <a class="code" href="classmocha_1_1_trait_processor.html#a90d1c88f5a7a093a2cfb2306e989769c">info_</a> , <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() );
<a name="l00051"></a>00051     <a class="code" href="classmocha_1_1_trait_processor.html#a952d6c040be1e5429563b3752bff0d29">CreateMixinStmt_</a>( list , var_stmt );
<a name="l00052"></a>00052     fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( ret );
<a name="l00053"></a>00053   }
<a name="l00054"></a>00054   <span class="keywordtype">object</span>-&gt;Node( list );
<a name="l00055"></a>00055   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* trait_mark = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a7e4464e4bee1751689aed938dcd314fe">SymbolList::kTraitMark</a> ),
<a name="l00056"></a>00056                                                     <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00057"></a>00057   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* true_value = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66adec164e8aeea956654af7ba3423ee9c7">SymbolList::kTrue</a> ),
<a name="l00058"></a>00058                                                     <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa7d6e7cf7b630b7050ae6e4572277c5bb">Token::JS_TRUE</a> , <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba713f9eb358c39834791cb0fd598a609b">ValueNode::kTrue</a> );
<a name="l00059"></a>00059   trait_mark-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( true_value );
<a name="l00060"></a>00060   list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( trait_mark );
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="namespacemocha.html#a34095d7dde21c0fbd11831cd91456a4a">00063</a> <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> <a class="code" href="namespacemocha.html#a34095d7dde21c0fbd11831cd91456a4a">GetPrivateIterator</a>( <a class="code" href="classmocha_1_1_trait.html">Trait</a> *trait ) {
<a name="l00064"></a>00064   <span class="keywordflow">return</span> trait-&gt;<a class="code" href="classmocha_1_1_trait.html#a963c2c9fd0c2077d249b94f032e156fb">GetPrivate</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00065"></a>00065 }
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="namespacemocha.html#a2911abdd415c4eeba20d9b7749141684">00067</a> <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> <a class="code" href="namespacemocha.html#a2911abdd415c4eeba20d9b7749141684">GetPublicIterator</a>( <a class="code" href="classmocha_1_1_trait.html">Trait</a> *trait ) {
<a name="l00068"></a>00068   <span class="keywordflow">return</span> trait-&gt;<a class="code" href="classmocha_1_1_trait.html#a54ef57cd1166d8bc7912e3961ad0ce1c">GetPublic</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00069"></a>00069 }
<a name="l00070"></a>00070 
<a name="l00071"></a><a class="code" href="classmocha_1_1_trait_processor.html#a063e90b1e7ee7160a836ea7512b00154">00071</a> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_trait_processor.html#a063e90b1e7ee7160a836ea7512b00154">TraitProcessor::CommonProcessor_</a>( <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* list , IteratorGetter getter , <span class="keyword">const</span> <span class="keywordtype">char</span>* type ) {
<a name="l00072"></a>00072   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* member_field = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( type,
<a name="l00073"></a>00073                                                       <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00074"></a>00074   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* value = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba839c61798b67a9f67787b8cd6c401a65">ValueNode::kObject</a> ) );
<a name="l00075"></a>00075   <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* member_list = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00076"></a>00076   
<a name="l00077"></a>00077   <a class="code" href="classmocha_1_1_i_visitor.html">IVisitor</a>* visitor = <a class="code" href="classmocha_1_1_trait_processor.html#a90d1c88f5a7a093a2cfb2306e989769c">info_</a>-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>();
<a name="l00078"></a>00078   <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = getter( <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a> );
<a name="l00079"></a>00079   <span class="keywordflow">while</span> ( iterator.<a class="code" href="classmocha_1_1_node_iterator.html#ae3ce9ed39cc570c83549498c121c0150">HasNext</a>() ) {
<a name="l00080"></a>00080     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = iterator.<a class="code" href="classmocha_1_1_node_iterator.html#acc2e3f06c89bb07d2d64f2c024900d5b">Next</a>();
<a name="l00081"></a>00081     <a class="code" href="classmocha_1_1_trait_member.html">TraitMember</a>* member = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#aece953ac3a588a8d731d258e4e7e57d9">CastToExpression</a>()-&gt;<a class="code" href="classmocha_1_1_expression.html#a0bb72b025f6ef154427a29de109a5af5">CastToTraitMember</a>();
<a name="l00082"></a>00082     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <span class="keyword">property</span> = member-&gt;<a class="code" href="classmocha_1_1_trait_member.html#a10cb950bac544a2fae3a845ec37e56c6">GetProperty</a>();
<a name="l00083"></a>00083     <span class="keyword">property</span>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( visitor );
<a name="l00084"></a>00084     <a class="code" href="classmocha_1_1_function.html">Function</a>* fn = <span class="keyword">property</span>-&gt;<a class="code" href="classmocha_1_1_expression.html#a518359725d2a90e69242d85594bc0b30">CastToExpression</a>()-&gt;<a class="code" href="classmocha_1_1_expression.html#a56027507124496007854f768cd847d52">CastToFunction</a>();
<a name="l00085"></a>00085     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* prop = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( fn-&gt;<a class="code" href="classmocha_1_1_function.html#a519eeb5120164a9a77734db8c0de3ca8">Name</a>()-&gt;CastToValue()-&gt;Symbol()-&gt;GetToken(),
<a name="l00086"></a>00086                                                 <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , fn-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00087"></a>00087     prop-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( property );
<a name="l00088"></a>00088     member_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( prop );
<a name="l00089"></a>00089   }
<a name="l00090"></a>00090   value-&gt;Node( member_list );
<a name="l00091"></a>00091   member_field-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( value );
<a name="l00092"></a>00092   list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( member_field );
<a name="l00093"></a>00093 }
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 
<a name="l00097"></a><a class="code" href="classmocha_1_1_trait_processor.html#af646d1fded29a7b4ed32db4d041682e9">00097</a> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_trait_processor.html#af646d1fded29a7b4ed32db4d041682e9">TraitProcessor::ProcessPrivate_</a>( <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* list ) {
<a name="l00098"></a>00098   <a class="code" href="classmocha_1_1_trait_processor.html#a063e90b1e7ee7160a836ea7512b00154">CommonProcessor_</a>( list , <a class="code" href="namespacemocha.html#a34095d7dde21c0fbd11831cd91456a4a">GetPrivateIterator</a> , <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a15ff7d59c2841f31922444499114d325">SymbolList::kTraitPrivate</a> ) );
<a name="l00099"></a>00099 }
<a name="l00100"></a>00100 
<a name="l00101"></a><a class="code" href="classmocha_1_1_trait_processor.html#af28b7da942c72a903f7a88151591603c">00101</a> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_trait_processor.html#af28b7da942c72a903f7a88151591603c">TraitProcessor::ProcessPublic_</a>( <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* list ) {
<a name="l00102"></a>00102   <a class="code" href="classmocha_1_1_trait_processor.html#a063e90b1e7ee7160a836ea7512b00154">CommonProcessor_</a>( list , <a class="code" href="namespacemocha.html#a2911abdd415c4eeba20d9b7749141684">GetPublicIterator</a> , <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a744cd225fcdaa274d9ec2292b235b390">SymbolList::kTraitPublic</a> ) );
<a name="l00103"></a>00103 }
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="classmocha_1_1_trait_processor.html#a952d6c040be1e5429563b3752bff0d29">00105</a> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_trait_processor.html#a952d6c040be1e5429563b3752bff0d29">TraitProcessor::CreateMixinStmt_</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* mixin_list , <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* mark ) {
<a name="l00106"></a>00106   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* mixin = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4ad1187b9cf395c8a5bd6333fb650e4621">SymbolList::kMixin</a> ),
<a name="l00107"></a>00107                                                <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , mark-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00108"></a>00108   <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = mixin_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00109"></a>00109   <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* last = mark;
<a name="l00110"></a>00110   <span class="keywordflow">while</span> ( iterator.HasNext() ) {
<a name="l00111"></a>00111     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = iterator.Next();
<a name="l00112"></a>00112     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* rename = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>();
<a name="l00113"></a>00113     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <span class="keyword">remove</span> = rename-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad568cfbbb250d9f799b3f12643e7a351">NextSibling</a>();
<a name="l00114"></a>00114     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node = <span class="keyword">remove</span>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad568cfbbb250d9f799b3f12643e7a351">NextSibling</a>();
<a name="l00115"></a>00115     <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* args = <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 4 , <a class="code" href="classmocha_1_1_trait_processor.html#ab927330496a78fef533aa1c5cb6eb745">name_</a>-&gt;<a class="code" href="classmocha_1_1_value_node.html#a960b13fc3b0e5544518b64a393f4c272">Clone</a>() , name_node , rename , remove );
<a name="l00116"></a>00116     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_accessor = <a class="code" href="classmocha_1_1_ast_utils.html#ad4547f1789aba2e0857a51a02312b7ca">AstUtils::CreateRuntimeMod</a>( mixin );
<a name="l00117"></a>00117     <a class="code" href="classmocha_1_1_call_exp.html">CallExp</a>* runtime_call = <a class="code" href="classmocha_1_1_ast_utils.html#a77bd4f7ca31be505683055685aa1ff77">AstUtils::CreateNormalAccessor</a>( runtime_accessor , args );
<a name="l00118"></a>00118     <a class="code" href="classmocha_1_1_expression_stmt.html">ExpressionStmt</a>* stmt = <a class="code" href="classmocha_1_1_ast_utils.html#a2ad830d99f87e4aa99eb7b77ffcd8f60">AstUtils::CreateExpStmt</a>( runtime_call );
<a name="l00119"></a>00119     <a class="code" href="classmocha_1_1_trait_processor.html#adee805716650a09bc1b81f79686e47fe">body_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3a497322f5e2f8d5c186f38802c18f27">InsertAfter</a>( stmt , mark );
<a name="l00120"></a>00120     last = stmt;
<a name="l00121"></a>00121   }
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a><a class="code" href="classmocha_1_1_trait_processor.html#ae2a0fac54c740889182958f3f62a7e30">00124</a> <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* <a class="code" href="classmocha_1_1_trait_processor.html#ae2a0fac54c740889182958f3f62a7e30">TraitProcessor::ProcessMixin</a>( <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* mixin , <a class="code" href="classmocha_1_1_processor_info.html">ProcessorInfo</a>* info , <span class="keywordtype">long</span> line ) {
<a name="l00125"></a>00125   <a class="code" href="classmocha_1_1_visitor_info.html">VisitorInfo</a>* visitor_info = info-&gt;<a class="code" href="classmocha_1_1_processor_info.html#ab6c1f1d981b047d0d4967da546402905">GetInfo</a>();
<a name="l00126"></a>00126   <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = mixin-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00127"></a>00127   <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* ret = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00128"></a>00128   <span class="keywordflow">while</span> ( iterator.<a class="code" href="classmocha_1_1_node_iterator.html#ae3ce9ed39cc570c83549498c121c0150">HasNext</a>() ) {
<a name="l00129"></a>00129     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = iterator.<a class="code" href="classmocha_1_1_node_iterator.html#acc2e3f06c89bb07d2d64f2c024900d5b">Next</a>();
<a name="l00130"></a>00130     <a class="code" href="classmocha_1_1_mixin_member.html">MixinMember</a>* member = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#aece953ac3a588a8d731d258e4e7e57d9">CastToExpression</a>()-&gt;<a class="code" href="classmocha_1_1_expression.html#a5c0da23f4477b3034e44cc08950bf16d">CastToMixinMember</a>();
<a name="l00131"></a>00131     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* name_node = member-&gt;<a class="code" href="classmocha_1_1_mixin_member.html#aa5d9132bd296c5b85219bb9ade258bdc">GetName</a>();
<a name="l00132"></a>00132     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* rename_list = member-&gt;<a class="code" href="classmocha_1_1_mixin_member.html#a03180dc6e537ae2c7d0c92c20acd94be">GetRename</a>();
<a name="l00133"></a>00133     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* removal_list = member-&gt;<a class="code" href="classmocha_1_1_mixin_member.html#a2ccb4af39cf90ada3c94f77c42a301a0">GetRemoval</a>();
<a name="l00134"></a>00134     name_node-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( info-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00135"></a>00135     rename_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( info-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00136"></a>00136     removal_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a4d8947fa366bc716d745a12c55968458">Accept</a>( info-&gt;<a class="code" href="classmocha_1_1_processor_info.html#a49df50f044f059422912e453a4d863bb">GetVisitor</a>() );
<a name="l00137"></a>00137     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* rename_map = 0;
<a name="l00138"></a>00138     <span class="keywordflow">if</span> ( rename_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6ecb0925a6380a375a92451256039d7f">ChildLength</a>() &gt; 0 ) {
<a name="l00139"></a>00139       rename_map = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba839c61798b67a9f67787b8cd6c401a65">ValueNode::kObject</a> ) );
<a name="l00140"></a>00140       <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* map_list = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00141"></a>00141       <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> rename_iterator = rename_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00142"></a>00142       <span class="keywordflow">while</span> ( rename_iterator.HasNext() ) {
<a name="l00143"></a>00143         <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = rename_iterator.Next();
<a name="l00144"></a>00144         <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* before = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>();
<a name="l00145"></a>00145         <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* after = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a65c6f1546ebb657cbfb265f372c183cd">FirstChild</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#ad568cfbbb250d9f799b3f12643e7a351">NextSibling</a>()-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>();
<a name="l00146"></a>00146         std::stringstream sst;
<a name="l00147"></a>00147         sst &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; after-&gt;<a class="code" href="classmocha_1_1_value_node.html#a769c0c221283cca863964f6cf673c170">Symbol</a>()-&gt;GetToken() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;
<a name="l00148"></a>00148         <a class="code" href="classmocha_1_1_token_info.html">TokenInfo</a>* str = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_token_info.html">TokenInfo</a>( sst.str().c_str() , <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa74ae1f8e3b0701db2bd560658647d586">Token::JS_STRING_LITERAL</a> , line ) );
<a name="l00149"></a>00149         after-&gt;<a class="code" href="classmocha_1_1_value_node.html#a769c0c221283cca863964f6cf673c170">Symbol</a>( str );
<a name="l00150"></a>00150         before-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( after );
<a name="l00151"></a>00151         map_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( before );
<a name="l00152"></a>00152       }
<a name="l00153"></a>00153       rename_map-&gt;<a class="code" href="classmocha_1_1_value_node.html#a88025ff701eebee191dc5783a2c161c7">Node</a>( map_list );
<a name="l00154"></a>00154     }
<a name="l00155"></a>00155     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* remove_map = 0;
<a name="l00156"></a>00156     <span class="keywordflow">if</span> ( removal_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6ecb0925a6380a375a92451256039d7f">ChildLength</a>() &gt; 0 ) {
<a name="l00157"></a>00157       remove_map = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba839c61798b67a9f67787b8cd6c401a65">ValueNode::kObject</a> ) );
<a name="l00158"></a>00158       <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* map_list = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00159"></a>00159       <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> removal_iterator = removal_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a3c769907079ab97a2970d6b54d137ab0">ChildNodes</a>();
<a name="l00160"></a>00160       <span class="keywordflow">while</span> ( removal_iterator.HasNext() ) {
<a name="l00161"></a>00161         <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = removal_iterator.Next();
<a name="l00162"></a>00162         <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* true_val = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66adec164e8aeea956654af7ba3423ee9c7">SymbolList::kTrue</a> ),
<a name="l00163"></a>00163                                                         <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa7d6e7cf7b630b7050ae6e4572277c5bb">Token::JS_TRUE</a> , line , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00164"></a>00164         item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( true_val );
<a name="l00165"></a>00165         map_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( item );
<a name="l00166"></a>00166       }
<a name="l00167"></a>00167       remove_map-&gt;<a class="code" href="classmocha_1_1_value_node.html#a88025ff701eebee191dc5783a2c161c7">Node</a>( map_list );
<a name="l00168"></a>00168     }
<a name="l00169"></a>00169     <span class="keywordflow">if</span> ( rename_map == 0 ) {
<a name="l00170"></a>00170       rename_map = <a class="code" href="classmocha_1_1_ast_utils.html#a20a30d91e2013c43e91d20c01f6b4eb8">AstUtils::CreateObjectLiteral</a>( ManagedHandle::Retain&lt;Empty&gt;() );
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172     <span class="keywordflow">if</span> ( remove_map == 0 ) {
<a name="l00173"></a>00173       remove_map = <a class="code" href="classmocha_1_1_ast_utils.html#a20a30d91e2013c43e91d20c01f6b4eb8">AstUtils::CreateObjectLiteral</a>( ManagedHandle::Retain&lt;Empty&gt;() );
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175     ret-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( <a class="code" href="classmocha_1_1_ast_utils.html#a491e3a29ccd8515edd75f7ad1658ff03">AstUtils::CreateNodeList</a>( 3 , rename_map, remove_map , name_node ) );
<a name="l00176"></a>00176   }
<a name="l00177"></a>00177   <span class="keywordflow">return</span> ret;
<a name="l00178"></a>00178 }
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="classmocha_1_1_trait_processor.html#a963012039e428372c18689d0f6f7b438">00180</a> <span class="keywordtype">void</span> <a class="code" href="classmocha_1_1_trait_processor.html#a963012039e428372c18689d0f6f7b438">TraitProcessor::ProcessRequires_</a>( <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* list ) {
<a name="l00181"></a>00181   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* <span class="keywordtype">object</span> = <a class="code" href="classmocha_1_1_managed_handle.html#a37d5506197f103b180d88f19f3b7d2b5">ManagedHandle::Retain</a>( <span class="keyword">new</span> <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>( <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba839c61798b67a9f67787b8cd6c401a65">ValueNode::kObject</a> ) );
<a name="l00182"></a>00182   <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* prop = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#aa644a8beebf2d26615a11e81b7bd0cc4a871c14fb67235c1d6e65f969bb149695">SymbolList::kRequires</a> ),
<a name="l00183"></a>00183                                               <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aae4fb4d955f873ddd766effe60c77e681">Token::JS_PROPERTY</a> , <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba70b4c10f3806f4de5c5f67bce258b5cb">ValueNode::kProperty</a> );
<a name="l00184"></a>00184   <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* requires = <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_trait.html#a55f5d696e623bf1b1124078539106409">GetRequireList</a>();
<a name="l00185"></a>00185   <a class="code" href="classmocha_1_1_node_iterator.html">NodeIterator</a> iterator = requires-&gt;ChildNodes();
<a name="l00186"></a>00186   <a class="code" href="classmocha_1_1_node_list.html">NodeList</a>* require_list = ManagedHandle::Retain&lt;NodeList&gt;();
<a name="l00187"></a>00187   <span class="keywordflow">while</span> ( iterator.<a class="code" href="classmocha_1_1_node_iterator.html#ae3ce9ed39cc570c83549498c121c0150">HasNext</a>() ) {
<a name="l00188"></a>00188     <a class="code" href="classmocha_1_1_ast_node.html">AstNode</a>* item = iterator.<a class="code" href="classmocha_1_1_node_iterator.html#acc2e3f06c89bb07d2d64f2c024900d5b">Next</a>();
<a name="l00189"></a>00189     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* name = item-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a21324d298123937056c972179d03fade">CastToValue</a>();
<a name="l00190"></a>00190     <a class="code" href="classmocha_1_1_value_node.html">ValueNode</a>* true_val = <a class="code" href="classmocha_1_1_ast_utils.html#a1a4ad629469bdb21a0b4b67023c416f1">AstUtils::CreateNameNode</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae1c6ed56e340562976099133b2c258d0">SymbolList::GetSymbol</a>( <a class="code" href="classmocha_1_1_symbol_list.html#ae6106c4f71f0e9abecd8f3f9f5500d66adec164e8aeea956654af7ba3423ee9c7">SymbolList::kTrue</a> ),
<a name="l00191"></a>00191                                                     <a class="code" href="classmocha_1_1_token.html#ad91b4584085a00e1cfe54b275a2c466aa7d6e7cf7b630b7050ae6e4572277c5bb">Token::JS_TRUE</a> , <a class="code" href="classmocha_1_1_trait_processor.html#a8d94b8d55d770bec3d3b0b17cc626bf0">trait_</a>-&gt;<a class="code" href="classmocha_1_1_ast_node.html#a6bda7ec5e55d6baa2afc4ab4300caaf1">Line</a>() , <a class="code" href="classmocha_1_1_value_node.html#aeafe128bdaf5aac5d5bf31129b46bc1ba713f9eb358c39834791cb0fd598a609b">ValueNode::kTrue</a> );
<a name="l00192"></a>00192     name-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( true_val );
<a name="l00193"></a>00193     require_list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( name );
<a name="l00194"></a>00194   }
<a name="l00195"></a>00195   <span class="keywordtype">object</span>-&gt;Node( require_list );
<a name="l00196"></a>00196   prop-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( <span class="keywordtype">object</span> );
<a name="l00197"></a>00197   list-&gt;<a class="code" href="classmocha_1_1_ast_node.html#acada63e4d868960a7fbd972f3d3a0ae4">AddChild</a>( prop );
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 }
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Feb 16 2012 23:50:16 for mocha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
